<!DOCTYPE html>
<html lang="en">
  <head class="at-element-marker">
  <title>Set the FC or UTA/UTA2 configuration on node3</title>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge,chrome=1">
  <meta http-equiv="language" content="en">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta property="og:title" content="Set the FC or UTA/UTA2 configuration on node3" />
	<meta property="og:type" content="website" />
	<meta property="og:url" content="https://docs.netapp.com/us-en/ontap-systems/upgrade-arl-auto-app/setting_the_fc_or_uta_uta2_configuration_on_node3.html" />
	<meta property="og:description" content="If node3 has onboard FC ports, onboard unified target adapter (UTA/UTA2) ports, or a UTA/UTA2 card." />
  <meta property="og:image" content="https://docs.netapp.com/us-en/ontap-systems/images/logo-tophat-social.png" />
  <meta property="og:image:alt" content="NetApp Logo" />
  <meta name="format-detection" content="telephone=no">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="encoding" content="utf-8">
  <meta http-equiv="nss-type" content="Product Documentation"/>
  <meta http-equiv="nss-subtype" content="User Guide"/>
  
  <meta name="description" content="If node3 has onboard FC ports, onboard unified target adapter (UTA/UTA2) ports, or a UTA/UTA2 card.">
  <meta name="keywords" content=" setting, fc, uta, uta2 configuration, node">
  
  

  <!-- Icons -->
  <link rel="icon" href="/us-en/ontap-systems/images/favicon.ico" type="image/x-icon">

  <!-- RSS Feed -->
  

  <!-- CSS Definitions: NetApp CSS should be defined after generic css -->

  <!-- Elastic Search -->
  <link rel="stylesheet" href="//cdn.jsdelivr.net/searchkit/0.10.0/theme.css">

  <!-- Controls AsciiDoctor Admonition Blocks -->
  <link rel="stylesheet" type="text/css" href="/us-en/ontap-systems/css/font-awesome.min.css">

  <!-- Controls the shadow effect for search dropdown menu -->
  <link rel="stylesheet" href="/us-en/ontap-systems/css/boxshadowproperties.css">

  <!-- NetApp CSS controls the technical content -->
  <link rel="stylesheet" type="text/css" href="/us-en/ontap-systems/css/netapp.css">

  <!-- WWW CSS Content -->
  <link rel="stylesheet" type="text/css" href="/us-en/ontap-systems/css/www-luci-dotcom.min.css">
  <link rel="stylesheet" type="text/css" href="/us-en/ontap-systems/css/www-netapp-dotcom.css">
  <link rel="stylesheet" href="/us-en/ontap-systems/css/www-netapp-library-critical.min.css" media="all" >
  <link rel="stylesheet" href="/us-en/ontap-systems/css/www-netapp-library-non-critical.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <link rel="stylesheet" href="/us-en/ontap-systems/css/www-netapp-library-global-header-footer.min.css">

  <!-- NetApp IE Customizations -->
  <link rel="stylesheet" href='/us-en/ontap-systems/css/na-utility.css' type='text/css'>
  <link rel="stylesheet" href='/us-en/ontap-systems/css/na-sidebar.css' type='text/css'>
  <link rel='stylesheet' href='/us-en/ontap-systems/css/clouddocs.css' type='text/css'>
  <link rel='stylesheet' href='/us-en/ontap-systems/css/na-pagenav.css' type='text/css'>

  

  
  <link rel='stylesheet' href='/us-en/ontap-systems/css/na-feature.css' type='text/css'>
  


  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
  <!-- Used to import Promise for IE. Required for SearchKit -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/bluebird/3.3.5/bluebird.min.js"></script>
  
    <script src='/us-en/ontap-systems/js/na-search.js'></script>
  

  
  <script src='/us-en/ontap-systems/js/na-pagenav.js'></script>
  

  <link rel='stylesheet' href='/us-en/ontap-systems/css/prism.css' type='text/css'>
  <link rel='stylesheet' href='/us-en/ontap-systems/css/prism-netapp.css' type='text/css'>


  <script src='/us-en/ontap-systems/js/na-utility.js'></script>
  <script src='/us-en/ontap-systems/js/clouddocs.js'></script>
  <script>
  if (document.location.hostname === "docs.netapp.com") {
    var head = document.getElementsByTagName('head')[0];
    var adobe = document.createElement("script");
    adobe.type = "text/javascript";
    adobe.src = "//assets.adobedtm.com/60287eadf1ee/c284da483c83/launch-e9ff3acac59f.min.js";
    head.appendChild(adobe);
  }
  </script>
  <script src='/us-en/ontap-systems/js/jquery.navgoco.min.js'></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
  <script src='/us-en/ontap-systems/js/toc.js'></script>
  <script src='/us-en/ontap-systems/js/customscripts.js'></script>

  <script>
      $(document).ready(function() {
          
          var collapseOnInit = true;
          

          var navSettings = {
              "caretHtml": '',
              "accordion": collapseOnInit,
              "openClass": 'active', // open
              "save": false, // leave false or nav highlighting doesn't work right
              "cookie": {
                  "name": 'navgoco',
                  "expires": false,
                  "path": '/'
              },
              "slide": {
                  "duration": 400,
                  "easing": 'swing'
              }
          };

          // Initialize navgoco with default options
          $("#mysidebar").navgoco(navSettings);
          

          $("#collapseAll").click(function(e) {
              e.preventDefault();
              $("#mysidebar").navgoco('toggle', false);
          });

          $("#expandAll").click(function(e) {
              e.preventDefault();
              $("#mysidebar").navgoco('toggle', true);
          });

      });

  </script>
  <script>
      $(document).ready(function() {
          $("#tg-sb-link").click(function() {
              $("#tg-sb-sidebar").toggle();
              $("#tg-sb-content").toggleClass('col-md-9');
              $("#tg-sb-content").toggleClass('col-md-12');
              $("#tg-sb-icon").toggleClass('fa-toggle-on');
              $("#tg-sb-icon").toggleClass('fa-toggle-off');
          });
      });
  </script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-81697994-3"></script>
  <script>
  if (document.location.hostname === "docs.netapp.com") {
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-81697994-3');
  }
  </script>
</head>


  <body class role="document">
    <div id="page" class="n-off-canvas-menu">
      <div class="n-off-canvas-menu__menu"><!--TODO: Add offcanvas code --></div>
      <div class="n-off-canvas-menu__content-wrap">
        <header class="site-header" id="banner">
  <!-- Start top_hat -->
  <div class="n-top-hat">
    <div class="n-container">
      <div class="n-top-hat__cross-property-nav">
        <ul class="n-top-hat__list">
          <li class="n-top-hat__list-item">
            <a href="https://www.netapp.com/products-a-z/" class="n-top-hat__link">Product and Solutions</a>
          </li>
          <li class="n-top-hat__list-item">
            <a href="https://www.netapp.com/support-and-training/netapp-university/" class="n-top-hat__link">Support and Training</a>
          </li>
          <li class="n-top-hat__list-item">
            <a href="https://cloud.netapp.com" class="n-top-hat__link">Cloud Central</a>
          </li>
          <li class="n-top-hat__list-item">
            <a href="https://community.netapp.com/" class="n-top-hat__link">Community</a>
          </li>
          <li class="n-top-hat__list-item">
            <a href="https://blog.netapp.com/" class="n-top-hat__link">Blog</a>
          </li>
          <li class="n-top-hat__list-item">
            <a href="https://customers.netapp.com/en/" class="n-top-hat__link">Customer Stories</a>
          </li>
          <li class="n-top-hat__list-item">
            <a href="https://www.netapp.com/us/contact-us/index.aspx" target="_self" class="n-top-hat__link" data-ntap-ui="contact-us">Contact</a>
          </li>
        </ul>
      </div>
      <div class="n-top-hat__utils">
        <ul class="n-top-hat__list">
          <li class="n-top-hat__list-item">
            <a href="https://www.netapp.com/us/contact-us/index.aspx" target="_self" class="n-top-hat__link" data-ntap-ui="contact-us">Contact</a>
          </li>
        </ul>
      </div>
    </div>
  </div>
  <!-- End top_hat -->

  <!-- Start property bar -->
  <style>
    .n-property-navigation-bar__menus--desktop-experience .n-menu--mega__default-content__heading span {
    color: #34B0FF;
    }
  </style>
  <div class="n-property-bar " data-ntap-ui="sticky-nav">
    <div class="n-property-bar__inner-wrap">
      <div class="n-property-bar__menu-toggle">
        <a href="#" class="n-property-bar__menu-toggle-link">
          <span class="n-property-bar__menu-toggle-text">Menu</span>
          <svg class="n-icon-bars n-property-bar__menu-toggle-icon" aria-labelledby="title">
            <title>bars</title>
            <use xlink:href="/us-en/ontap-systems/common/svg/sprite.svg#bars"></use>
          </svg>
        </a>
      </div>
      <div class="n-property-bar__property-mark ">
        <a href="https://www.netapp.com" class="n-property-bar__property-link">
          <div class="n-property-bar__logo">
            <svg class="n-icon-netapp-mark n-icon-netapp-mark n-property-bar__netapp-mark-icon" aria-labelledby="title">
              <title>netapp-mark</title>
              <use xlink:href="/us-en/ontap-systems/common/svg/sprite.svg#netapp-mark"></use>
            </svg>
            <svg class="n-icon-netapp-logo n-property-bar__logo-svg" aria-labelledby="title">
              <title>netapp-logo</title>
              <use xlink:href="/us-en/ontap-systems/common/svg/sprite.svg#netapp-logo"></use>
            </svg>
          </div>
        </a>
      </div>

      
      <div class="search-property-bar">
        <div id="search-demo-container" class="searchbox n-property-bar__search">
          <div id="react-search" data-type="widget" data-placeholder="Search Documentation" data-no-results-found="No results were found for {query}" data-did-you-mean="Search for {suggestion}." data-no-results-found-did-you-mean="No results found for {query}. Did you mean {suggestion}?" data-results-found="{hitCount} results found"  ></div>
          <button class="n-property-bar__search-toggle-button" type="button">
            <svg class="n-icon-search n-property-bar__search-toggle-button-icon" aria-labelledby="title">
              <title>search</title>
              <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/us-en/ontap-systems/common/svg/sprite.svg#search"></use>
            </svg>
          </button>
        </div>
      </div>
      
    </div>
  </div>
  <div class="n-property-bar__toolbar"><!-- Start Language Selector --><!-- End Language Selector -->

    <div class="n-property-bar__cta"></div>
  </div>
  <script>
    $(function(){
        var currentLocalization = $('html').attr('lang');

        var localizationsDictionary = {
            "en-CA" : "https://www.netapp.com/search/index.aspx?for_cr=canada&",
            "en-IN" : "https://www.netapp.com/search/index.aspx?for_cr=india&",
            "nl-NL" : "https://www.netapp.com/search/index.aspx?for_cr=netherlands&",
            "ru-RU" : "https://www.netapp.com/search/index.aspx?for_cr=russia&",
            "sv-SE" : "https://www.netapp.com/search/index.aspx?for_cr=sweden&",
            "it-IT" : "https://www.netapp.com/search/index.aspx?for_cr=italy&",
            "he-IL" : "https://www.netapp.com/search/index.aspx?for_cr=israel&",
            "ko-KR" : "https://www.netapp.com/search/index.aspx?for_cr=korea&",
            "zh-TW" : "https://www.netapp.com/search/index.aspx?for_cr=taiwan&",
            "en-GB" : "https://www.netapp.com/search/index.aspx?for_cr=unitedkingdom&",
            "en-SG" : "https://www.netapp.com/search/index.aspx?for_cr=asean&",
            "en-AU" : "https://www.netapp.com/search/index.aspx?for_cr=australia&",
            "pt-BR" : "https://www.netapp.com/search/index.aspx?for_cr=brasil&",
            "de-CH" : "https://www.netapp.com/search/index.aspx?for_cr=switzerland&",
            "es-MX" : "https://www.netapp.com/search/index.aspx?for_cr=mexico&"
        };

        if($('html').hasClass('ntap-whitelisted') && localizationsDictionary.hasOwnProperty(currentLocalization)) {
            $('.n-property-bar__property-link').attr('href', '/');
        }
    });
  </script>
  <!-- End property bar -->
</header>

        <div class="ie-utility">
  <div class="ie-menu">
    <div class="n-breadcrumb">
      <ul class="n-breadcrumb__list">
        <li class="n-breadcrumb__list-item">
          <a href="https://www.netapp.com">Home</a>
        </li>
        <li class="n-breadcrumb__list-item">
          <a href="https://docs.netapp.com">Documentation</a>
        </li>
        

        <li class="n-breadcrumb__list-item">
          <a href="/us-en/ontap-systems/">ONTAP&nbsp;Systems</a>
        </li>
        <li class="n-breadcrumb__list-item">
          Set the FC or UTA/UTA2 configuration on node3
        </li>
      </ul>
    </div>

    <div style="clear: both"></div><!-- Main needs to have height -->
  </div>
</div>


        <main id="n-main-content" class="n-main-content">
          <!-- Start Documentation Content -->
<div class="ie-main">
  <!-- Sidebar Column -->
  
  <div class="col-md-3" >
      <div class="n-pdf-header">
  <a id="toggleButtonPdf" class="n-pdf-button" type="button">PDFs<span>
    </span>
  </a>
</div>
<ul id="toggleContainerPdf" class="n-pdf-body" style="display:none;"><div class="n-pdf-section">
      <span class="n-pdf-section-title">Site</span>
    </div>
    <li>
      <a target="_blank" href="/us-en/ontap-systems/pdfs/fullsite-upgrade-arl-auto-app_sidebar/Using__system_controller_replace__Commands_to_Upgrade_Controller_Hardware_Running_ONTAP_9_8.pdf" >
        <img src="/us-en/ontap-systems/images/pdf.png" width="20" height="20"/>
        Using "system controller replace" Commands to Upgrade Controller Hardware Running ONTAP 9.8
      </a>
    </li>

    
      <span class="subfolders" style="display:none;">
        
          <div class="n-pdf-section">
            <span class="n-pdf-section-title">
              Sections
            </span>
          </div>
        
        <li>
          <a target="_blank" href="/us-en/ontap-systems/pdfs/upgrade-arl-auto-app_sidebar/Use_aggregate_relocation_to_upgrade_controller_hardware.pdf" >
            <img src="/us-en/ontap-systems/images/pdf.png" width="20" height="20"/>
            Use aggregate relocation to upgrade controller hardware
          </a>
        </li>
        <span>
          






          
        </span>
      </span>
    

  



















    
      <span class="subfolders" style="display:none;">
        
          <div class="n-pdf-section">
            <span class="n-pdf-section-title">
              Sections
            </span>
          </div>
        
        <li>
          <a target="_blank" href="/us-en/ontap-systems/pdfs/upgrade-arl-auto-app_sidebar/Stage_1_Prepare_for_upgrade.pdf" >
            <img src="/us-en/ontap-systems/images/pdf.png" width="20" height="20"/>
            Stage 1 Prepare for upgrade
          </a>
        </li>
        <span>
          








          
        </span>
      </span>
    

  



    
      <span class="subfolders" style="display:none;">
        
          <div class="n-pdf-section">
            <span class="n-pdf-section-title">
              Sections
            </span>
          </div>
        
        <li>
          <a target="_blank" href="/us-en/ontap-systems/pdfs/upgrade-arl-auto-app_sidebar/Stage_2_Relocate_and_retiring_node1.pdf" >
            <img src="/us-en/ontap-systems/images/pdf.png" width="20" height="20"/>
            Stage 2 Relocate and retiring node1
          </a>
        </li>
        <span>
          












          
        </span>
      </span>
    

  



    
      <span class="subfolders" style="display:none;">
        
          <div class="n-pdf-section">
            <span class="n-pdf-section-title">
              Sections
            </span>
          </div>
        
        <li>
          <a target="_blank" href="/us-en/ontap-systems/pdfs/upgrade-arl-auto-app_sidebar/Stage_3_Install_and_boot_node3.pdf" >
            <img src="/us-en/ontap-systems/images/pdf.png" width="20" height="20"/>
            Stage 3 Install and boot node3
          </a>
        </li>
        <span>
          




    <div class="n-pdf-section">
  <span class="n-pdf-section-title">This page</span>
</div>

<li class="active">
  <a target="_blank" href="/us-en/ontap-systems/pdfs/pages/upgrade-arl-auto-app/setting_the_fc_or_uta_uta2_configuration_on_node3.pdf" >
    <img src="/us-en/ontap-systems/images/pdf.png" width="20" height="20"/>
    Set the FC or UTA/UTA2 configuration on node3
  </a>
</li>


  










          
        </span>
      </span>
    

  



    
      <span class="subfolders" style="display:none;">
        
          <div class="n-pdf-section">
            <span class="n-pdf-section-title">
              Sections
            </span>
          </div>
        
        <li>
          <a target="_blank" href="/us-en/ontap-systems/pdfs/upgrade-arl-auto-app_sidebar/Stage_4_Relocate_and_retiring_node2.pdf" >
            <img src="/us-en/ontap-systems/images/pdf.png" width="20" height="20"/>
            Stage 4 Relocate and retiring node2
          </a>
        </li>
        <span>
          








          
        </span>
      </span>
    

  



    
      <span class="subfolders" style="display:none;">
        
          <div class="n-pdf-section">
            <span class="n-pdf-section-title">
              Sections
            </span>
          </div>
        
        <li>
          <a target="_blank" href="/us-en/ontap-systems/pdfs/upgrade-arl-auto-app_sidebar/Stage_5_Install_and_boot_node4.pdf" >
            <img src="/us-en/ontap-systems/images/pdf.png" width="20" height="20"/>
            Stage 5 Install and boot node4
          </a>
        </li>
        <span>
          














          
        </span>
      </span>
    

  



    
      <span class="subfolders" style="display:none;">
        
          <div class="n-pdf-section">
            <span class="n-pdf-section-title">
              Sections
            </span>
          </div>
        
        <li>
          <a target="_blank" href="/us-en/ontap-systems/pdfs/upgrade-arl-auto-app_sidebar/Stage_6_Complete_the_upgrade.pdf" >
            <img src="/us-en/ontap-systems/images/pdf.png" width="20" height="20"/>
            Stage 6 Complete the upgrade
          </a>
        </li>
        <span>
          
















          
        </span>
      </span>
    

  



    
      <span class="subfolders" style="display:none;">
        
          <div class="n-pdf-section">
            <span class="n-pdf-section-title">
              Sections
            </span>
          </div>
        
        <li>
          <a target="_blank" href="/us-en/ontap-systems/pdfs/upgrade-arl-auto-app_sidebar/Troubleshooting.pdf" >
            <img src="/us-en/ontap-systems/images/pdf.png" width="20" height="20"/>
            Troubleshooting
          </a>
        </li>
        <span>
          
















          
        </span>
      </span>
    

  


</ul>

<script>
  $("#toggleContainerPdf li.active").parents('li').toggle('display');
  $("#toggleContainerPdf li.active").parents('span.subfolders').toggle('display');
  $("#toggleButtonPdf").click(function () {
    $("#toggleContainerPdf").toggle('display');
  });
</script><ul id="mysidebar" class="nav"><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Use aggregate relocation to upgrade controller hardware</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="using_aggregate_relocation_to_upgrade_controller_hardware_overview.html">
        Overview
      </a></li><li class=" "><a class="na-navbar-padding" href="automating_the_controller_upgrade_process.html">
        Automate the controller upgrade process
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="deciding_whether_to_use_the_aggregate_relocation_guide.html">
        Decide whether to use the aggregate relocation guide
      </a></li><li class=" "><a class="na-navbar-padding" href="required_tools_and_documentation.html">
        Required tools and documentation
      </a></li><li class=" "><a class="na-navbar-padding" href="guidelines_for_upgrading_controllers_with_arl.html">
        Guidelines for upgrading controllers with ARL
      </a></li><li class=" "><a class="na-navbar-padding" href="verifying_the_health_of_the_metrocluster_configuration.html">
        Verify the health of the MetroCluster configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="checking_for_metrocluster_configuration_errors.html">
        Check for MetroCluster configuration errors
      </a></li><li class=" "><a class="na-navbar-padding" href="verifying_switchover,_healing,_and_switchback.html">
        Verify switchover, healing, and switchback
      </a></li><li class=" "><a class="na-navbar-padding" href="overview_of_the_arl_upgrade.html">
        Overview of the ARL upgrade
      </a></li><li class=" "><a class="na-navbar-padding" href="upgrading_the_node_pair.html">
        Upgrade the node pair
      </a></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Stage 1 Prepare for upgrade</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="stage_1_preparing_for_upgrade_overview.html">
        Overview
      </a></li><li class=" "><a class="na-navbar-padding" href="preparing_the_nodes_for_upgrade.html">
        Prepare the nodes for upgrade
      </a></li><li class=" "><a class="na-navbar-padding" href="getting_an_ip_address_of_an_external_key_management_server_for_storage_encryption.html">
        Get an IP address of an external key management server for storage encryption
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Stage 2 Relocate and retiring node1</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="stage_2_relocating_and_retiring_node1_overview.html">
        Overview
      </a></li><li class=" "><a class="na-navbar-padding" href="relocating_non-root_aggregates_and_nas_data_lifs_owned_by_node1_to_node2.html">
        Relocate non-root aggregates and NAS data LIFs owned by node1 to node2
      </a></li><li class=" "><a class="na-navbar-padding" href="relocating_failed_or_vetoed_aggregates.html">
        Relocate failed or vetoed aggregates
      </a></li><li class=" "><a class="na-navbar-padding" href="retiring_node1.html">
        Retire node1
      </a></li><li class=" "><a class="na-navbar-padding" href="preparing_for_netboot.html">
        Prepare for netboot
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Stage 3 Install and boot node3</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="stage_3_installing_and_booting_node3_overview.html">
        Overview
      </a></li><li class=" "><a class="na-navbar-padding" href="installing_and_booting_node3.html">
        Install and boot node3
      </a></li><li class="  active "><a class="na-navbar-padding" href="setting_the_fc_or_uta_uta2_configuration_on_node3.html">
        Set the FC or UTA/UTA2 configuration on node3
      </a></li><li class=" "><a class="na-navbar-padding" href="verifying_the_node3_installation.html">
        Verify the node3 installation
      </a></li><li class=" "><a class="na-navbar-padding" href="restoring_key-manager_configuration_on_node3.html">
        Restore key-manager configuration on node3
      </a></li><li class=" "><a class="na-navbar-padding" href="moving_non-root_aggregates_and_nas_data_lifs_owned_by_node1_from_node2_to_node3.html">
        Move non-root aggregates and NAS data LIFs owned by node1 from node2 to node3
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Stage 4 Relocate and retiring node2</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="stage_4_relocating_and_retiring_node2_overview.html">
        Overview
      </a></li><li class=" "><a class="na-navbar-padding" href="relocating_non-root_aggregates_and_nas_data_lifs_from_node2_to_node3.html">
        Relocate non-root aggregates and NAS data LIFs from node2 to node3
      </a></li><li class=" "><a class="na-navbar-padding" href="retiring_node2.html">
        Retire node2
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Stage 5 Install and boot node4</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="stage_5_installing_and_booting_node4_overview.html">
        Overview
      </a></li><li class=" "><a class="na-navbar-padding" href="installing_and_booting_node4.html">
        Install and boot node4
      </a></li><li class=" "><a class="na-navbar-padding" href="setting_the_fc_or_uta_uta2_configuration_on_node4.html">
        Set the FC or UTA/UTA2 configuration on node4
      </a></li><li class=" "><a class="na-navbar-padding" href="verifying_the_node4_installation.html">
        Verify the node4 installation
      </a></li><li class=" "><a class="na-navbar-padding" href="restoring_key-manager_configuration_on_node4.html">
        Restore key-manager configuration on node4
      </a></li><li class=" "><a class="na-navbar-padding" href="moving_non-root_aggregates_and_nas_data_lifs_owned_by_node2_from_node3_to_node4.html">
        Move non-root aggregates and NAS data LIFs owned by node2 from node3 to node4
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Stage 6 Complete the upgrade</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="stage_6_completing_the_upgrade_overview.html">
        Overview
      </a></li><li class=" "><a class="na-navbar-padding" href="completing_the_upgrade_for_metrocluster_fc_configuration.html">
        Complete the upgrade for MetroCluster FC configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="ensuring_that_the_new_controllers_are_set_up_correctly.html">
        Ensure that the new controllers are set up correctly
      </a></li><li class=" "><a class="na-navbar-padding" href="setting_up_storage_encryption_on_the_new_controller_module.html">
        Set up Storage Encryption on the new controller module
      </a></li><li class=" "><a class="na-navbar-padding" href="setting_up_netapp_volume_encryption_on_the_new_controller_module.html">
        Set up NetApp Volume Encryption on the new controller module
      </a></li><li class=" "><a class="na-navbar-padding" href="decommissioning_the_old_system.html">
        Decommission the old system
      </a></li><li class=" "><a class="na-navbar-padding" href="resuming_snapmirror_operations.html">
        Resume SnapMirror operations
      </a></li></ul></li><li class="subfolders "><a href="#">
        <div class="na-navbar-padding"> Troubleshooting</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="troubleshooting_overview.html">
        Overview
      </a></li><li class=" "><a class="na-navbar-padding" href="aggregate_relocation_failures.html">
        Aggregate relocation failures
      </a></li><li class=" "><a class="na-navbar-padding" href="checking_for_aggregate_relocation_failure.html">
        Check for aggregate relocation failure
      </a></li><li class=" "><a class="na-navbar-padding" href="aggregates_originally_on_node1_are_owned_by_node4_after_completion_of_the_upgrade.html">
        Aggregates originally on node1 are owned by node4 after completion of the upgrade
      </a></li><li class=" "><a class="na-navbar-padding" href="reboots_panics_or_power_cycles.html">
        Reboots, panics, or power cycles
      </a></li><li class=" "><a class="na-navbar-padding" href="issues_that_can_arise_in_multiple_stages_of_the_procedure.html">
        Issues that can arise in multiple stages of the procedure
      </a></li><li class=" "><a class="na-navbar-padding" href="lif_migration_failure.html">
        LIF migration failure
      </a></li></ul></li></ul>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

  </div>
  

  <div class="ie-content-pane n-doc__component-detail-content n-doc__component-detail-content--show-code">
    <!-- Begin of page container -->
    <article class="page-content">
      



<div class="n-doc__component-detail-heading-wrap">
  <h1 class="n-doc__component-detail-heading">Set the FC or UTA/UTA2 configuration on node3</h1>
</div>


<p class="page-details">
  
    
    <time datetime="2021-05-10 22:15:09 +0000">05/10/2021</time>
    
  

<span>Contributors
  <a target="_blank" href="https://github.com/netapp-barbe">
    <img  class="avatar avatar-small"
          alt="netapp-barbe"
          width="20" height="20"
          src="https://avatars.githubusercontent.com/u/55463742?v=4"
          style="border-radius: 50%;"/>
  </a>
  
  <a target="_blank" href="https://github.com/netapp-aherbin">
    <img  class="avatar avatar-small"
          alt="netapp-aherbin"
          width="20" height="20"
          src="https://avatars.githubusercontent.com/u/38955266?v=4"
          style="border-radius: 50%;"/>
  </a>
  
  <a target="_blank" href="https://github.com/netapp-pcarriga">
    <img  class="avatar avatar-small"
          alt="netapp-pcarriga"
          width="20" height="20"
          src="https://avatars.githubusercontent.com/u/77334475?v=4"
          style="border-radius: 50%;"/>
  </a>
  
</span>


  <span>
    <a target="_blank" href="/us-en/ontap-systems/pdfs/pages/upgrade-arl-auto-app/setting_the_fc_or_uta_uta2_configuration_on_node3.pdf" role="button">
      <img src="/us-en/ontap-systems/images/pdf.png" width="20" height="20"/>Download PDF of this page</a>
  </span>


</p>


<div id="preamble">
<div class="sectionbody">
<div class="paragraph lead">
<p>If node3 has onboard FC ports, onboard unified target adapter (UTA/UTA2) ports, or a UTA/UTA2 card, you must configure the settings before completing the rest of the procedure.</p>
</div>
<div class="paragraph">
<div class="title">About this task</div>
<p>You might need to complete the section <a href="setting_the_fc_or_uta_uta2_configuration_on_node3.html#configuring-fc-ports-on-node3">Configure FC ports on node3</a>, the section <a href="setting_the_fc_or_uta_uta2_configuration_on_node3.html#check-and-configure-utauta2-ports-on-node3">Check and configure UTA/UTA2 ports on node3</a>, or both sections.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
NetApp marketing materials might use the term UTA2 to refer to CNA adapters and ports. However, the CLI uses the term CNA.
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p>If node3 does not have onboard FC ports, onboard UTA/UTA2 ports, or a UTA/UTA2 card, and you are upgrading a system with storage disks, you can skip to the <a href="verifying_the_node3_installation.html">Verify the node 3 installation</a> section.</p>
</li>
<li>
<p>However, if you have a V-Series system or a system with FlexArray Virtualization software with storage arrays, and node3 does not have onboard FC ports, onboard UTA/UTA ports, or a UTA/UTA2 card, return to the section <a href="installing_and_booting_node3.html">Install and boot node3</a> and resume the section at step 23 .</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Choices</div>
<ul>
<li>
<p><a href="setting_the_fc_or_uta_uta2_configuration_on_node3.html#configure-fc-ports-on-node3">Configure FC ports on node3</a></p>
</li>
<li>
<p><a href="setting_the_fc_or_uta_uta2_configuration_on_node3.html#check-and-configure-utauta2-ports-on-node3">Check and configure UTA/UTA2 ports on node3</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configure-fc-ports-on-node3">Configure FC ports on node3</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If node3 has FC ports, either onboard or on an FC adapter, you must set port configurations on the node before you bring it into service because the ports are not preconfigured. If the ports are not configured, you might experience a disruption in service.</p>
</div>
<div class="paragraph">
<div class="title">Before you begin</div>
<p>You must have the values of the FC port settings from node1 that you saved in the section <a href="preparing_the_nodes_for_upgrade.html">Prepare the nodes for upgrade</a>.</p>
</div>
<div class="paragraph">
<div class="title">About this task</div>
<p>You can skip this section if your system does not have FC configurations. If your system has onboard UTA/UTA2 ports or a UTA/UTA2 card, you configure them in <a href="setting_the_fc_or_uta_uta2_configuration_on_node3.html#check-and-configure-utauta2-ports-on-node3">Check and configure UTA/UTA2 ports on node3</a>.</p>
</div>
<div class="paragraph">
<p><strong>Important</strong>: If your system has storage disks, enter the commands in this section at the cluster prompt. If you have a 'V-Series system' or have FlexArray Virtualization Software and are connected to storage arrays, enter commands in this section in Maintenance mode.</p>
</div>
<div class="olist arabic">
<div class="title">Steps</div>
<ol class="arabic">
<li>
<p>Compare the FC settings on node3 with the settings that you captured earlier from node1.</p>
</li>
<li>
<p>Take one of the following actions:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">If the system that you are upgrading&#8230;&#8203;</th>
<th class="tableblock halign-left valign-top">Then…</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Has storage disks</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>In maintenance mode (option 5 at boot menu), modify the FC ports on node3 as needed by using one of the following commands:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>To program target ports:<br>
<code>ucadmin modify -m fc -t target &lt;adapter&gt;</code></p>
</li>
<li>
<p>To program initiator ports:<br>
<code>ucadmin modify -m fc -t initiator &lt;adapter&gt;</code><br>
<code>-t</code> is the FC4 type: target or initiator.</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Is a V-Series system or has FlexArray Virtualization Software and is connected to storage arrays</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">In maintenance mode (option 5 at boot menu), modify the FC ports on node3 as needed by using the following command:<br>
<code>ucadmin modify -m fc -t initiator -f &lt;adapter_port_name&gt;</code><br>
<code>-t</code> is the FC4 type, target or initiator.<br>
<strong>Note</strong>: The FC ports must be programmed as initiators.</p></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Take one of the following actions:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">If the system that you are upgrading&#8230;&#8203;</th>
<th class="tableblock halign-left valign-top">Then…</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Has storage disks</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Verify the new settings by using the following command and examining the output:<br>
<code>ucadmin show</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Is a V-Series system or has FlexArray Virtualization Software and is connected to storage arrays</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Verify the new settings by using the following command and examining the output:<br>
<code>ucadmin show</code></p></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Exit Maintenance mode by using the following command:</p>
<div class="paragraph">
<p><code>halt</code></p>
</div>
</li>
<li>
<p>Boot the system from loader prompt by using the following command:</p>
<div class="paragraph">
<p><code>boot_ontap menu</code></p>
</div>
</li>
<li>
<p>After you enter the command, wait until the system stops at the boot environment prompt.</p>
</li>
<li>
<p>Select option <code>5</code> from the boot menu for maintenance mode.</p>
</li>
<li>
<p>Take one of the following actions:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">If the system that you are upgrading&#8230;&#8203;</th>
<th class="tableblock halign-left valign-top">Then…</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Has storage disks</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>If node3 has a UTA/UTA2 card or UTA/UTA2 onboard ports, go to the section <a href="setting_the_fc_or_uta_uta2_configuration_on_node3.html#check-and-configure-utauta2-ports-on-node3">Check and configure UTA/UTA2 ports on node3</a>.</p>
</li>
<li>
<p>If node3 does not have a UTA/UTA2 card or UTA/UTA2 onboard ports, skip the section <a href="setting_the_fc_or_uta_uta2_configuration_on_node3.html#check-and-configure-utauta2-ports-on-node3">Check and configure UTA/UTA2 ports on node3</a> and go to the section <a href="verifying_the_node3_installation.html">Verify the node3 installation</a>.</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Is a V-Series system or has FlexArray Virtualization Software and is connected to storage arrays</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>If node3 has a UTA/UTA2 card or UTA/UTA2 onboard ports, go to the section <a href="setting_the_fc_or_uta_uta2_configuration_on_node3.html#check-and-configure-utauta2-ports-on-node3">Check and configure UTA/UTA2 ports on node3</a>.</p>
</li>
<li>
<p>If node3 does not have a UTA/UTA2 card or UTA/UTA2 onboard ports, skip the section <a href="setting_the_fc_or_uta_uta2_configuration_on_node3.html#check-and-configure-utauta2-ports-on-node3">Check and configure UTA/UTA2 ports on node3</a> and return to <a href="installing_and_booting_node3.html">Install and boot node3</a> and resume the section at Step 23.</p>
</li>
</ul>
</div></div></td>
</tr>
</tbody>
</table>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="check-and-configure-utauta2-ports-on-node3">Check and configure UTA/UTA2 ports on node3</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If node3 has onboard UTA/UTA2 ports or a UTA/UTA2 card, you must check the configuration of the ports and possibly reconfigure them, depending on how you want to use the upgraded system.</p>
</div>
<div class="paragraph">
<div class="title">Before you begin</div>
<p>You must have the correct SFP+ modules for the UTA/UTA2 ports.</p>
</div>
<div class="paragraph">
<div class="title">About this task</div>
<p>If you want to use a Unified Target Adapter (UTA/UTA2) port for FC, you must first verify how the port is configured.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
NetApp marketing materials might use the term UTA2 to refer to CNA adapters and ports. However, the CLI uses the term CNA.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can use the <code>ucadmin show</code> command to verify the current port configuration:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>*&gt; ucadmin show
Adapter Current Mode Current Type Pending Mode Pending Type Admin Status
0e      fc           target       -            initiator    offline
0f      fc           target       -            initiator    offline
0g      fc           target       -            initiator    offline
0h      fc           target       -            initiator    offline
1a      fc           target       -            -            online
1b      fc           target       -            -            online
6 entries were displayed.</pre>
</div>
</div>
<div class="paragraph">
<p>UTA/UTA2 ports can be configured into native FC mode or UTA/UTA2 mode. FC mode supports FC initiator and FC target; UTA/UTA2 mode allows concurrent NIC and FCoE traffic sharing the same 10 GbE SFP+ interface and supports FC targets.</p>
</div>
<div class="paragraph">
<p>UTA/UTA2 ports might be found on an adapter or on the controller, and have the following configurations, but you should check the configuration of the UTA/UTA2 ports on the node3 and change it, if necessary:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>UTA/UTA2 cards ordered when the controller is ordered are configured before shipment to have the personality you request.</p>
</li>
<li>
<p>UTA/UTA2 cards ordered separately from the controller are shipped with the default FC target personality.</p>
</li>
<li>
<p>Onboard UTA/UTA2 ports on new controllers are configured before shipment to have the personality you request.</p>
<div class="paragraph">
<p><strong>Attention</strong>: If your system has storage disks, you enter the commands in this section at the cluster prompt unless directed to enter Maintenance mode. If you have a V- Series system or have FlexArray Virtualization Software and are connected to storage arrays, you enter commands in this section at the Maintenance mode prompt. You must be in Maintenance mode to configure UTA/UTA2 ports.</p>
</div>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Steps</div>
<ol class="arabic">
<li>
<p><a id="step1"></a>Check how the ports are currently configured by entering the following command on node3:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">If the system&#8230;&#8203;</th>
<th class="tableblock halign-left valign-top">Then…</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Has storage disks</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No action required.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Is a V-Series system or has FlexArray Virtualization Software and is connected to storage arrays</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ucadmin show</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The system displays output similar to the following examples:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>*&gt; ucadmin show
Adapter Current Mode Current Type Pending Mode Pending Type Admin Status
0e      fc           initiator    -            -            online
0f      fc           initiator    -            -            online
0g      cna          target       -            -            online
0h      cna          target       -            -            online
0e      fc           initiator    -            -            online
0f      fc           initiator    -            -            online
0g      cna          target       -            -            online
0h      cna          target       -            -            online
*&gt;</pre>
</div>
</div>
</li>
<li>
<p><a id="step2"></a>If the current SFP+ module does not match the desired use, replace it with the correct SFP+ module.</p>
<div class="paragraph">
<p>Contact your NetApp representative to obtain the correct SFP+ module.</p>
</div>
</li>
<li>
<p><a id="step3"></a>Examine the output of the <code>ucadmin show</code> command and determine whether the UTA/UTA2 ports have the personality you want.</p>
</li>
<li>
<p><a id="step4"></a>Take one of the following actions:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">If the UTA/UTA2 ports&#8230;&#8203;</th>
<th class="tableblock halign-left valign-top">Then…</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Do not have the personality that you want</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Go to <a href="#step5">Step 5</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Have the personality that you want</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Skip Step 5 through Step 12 and go to <a href="#step13">Step 13</a>.</p></td>
</tr>
</tbody>
</table>
</li>
<li>
<p><a id="step5"></a>Take one of the following actions:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">If you are configuring&#8230;&#8203;</th>
<th class="tableblock halign-left valign-top">Then…</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ports on a UTA/UTA2 card</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Go to <a href="#step7">Step 7</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Onboard UTA/UTA2 ports</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Skip Step 7 and go to <a href="#step8">Step 8</a>.</p></td>
</tr>
</tbody>
</table>
</li>
<li>
<p><a id="step6"></a>If the adapter is in initiator mode, and if the UTA/UTA2 port is online, take the UTA/UTA2 port offline by using the following command:</p>
<div class="paragraph">
<p><code>storage disable adapter &lt;adapter_name&gt;</code></p>
</div>
<div class="paragraph">
<p>Adapters in target mode are automatically offline in Maintenance mode.</p>
</div>
</li>
<li>
<p><a id="step7"></a>If the current configuration does not match the desired use, change the configuration as needed by using the following command:</p>
<div class="paragraph">
<p><code>ucadmin modify -m fc|cna -t initiator|target &lt;adapter_name&gt;</code></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>-m</code> is the personality mode, <code>fc</code> or <code>cna</code>.</p>
</li>
<li>
<p><code>-t</code> is the FC4 type, <code>target</code> or <code>initiator</code>.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You must use FC initiator for tape drives, FlexArray Virtualization systems, and MetroCluster configurations. You must use the FC target for SAN clients.
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><a id="step8"></a>Verify the settings by using the following command:</p>
<div class="paragraph">
<p><code>ucadmin show</code></p>
</div>
</li>
<li>
<p><a id="step9"></a>Verify the settings by using one of the following commands:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">If the system&#8230;&#8203;</th>
<th class="tableblock halign-left valign-top">Then…</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Has storage disks</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ucadmin show</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Is a V-Series system or has FlexArray Virtualization Software and is connected to storage arrays</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ucadmin show</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The output in the following examples shows that the FC4 type of adapter 1b is changing to <code>initiator</code> and that the mode of adapters 2a and 2b is changing to <code>cna</code>:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>*&gt; ucadmin show
Adapter Current Mode Current Type  Pending Mode Pending Type Admin Status
1a      fc           initiator     -            -            online
1b      fc           target        -            initiator    online
2a      fc           target        cna          -            online
2b      fc           target        cna          -            online
*&gt;</pre>
</div>
</div>
</li>
<li>
<p><a id="step10"></a>Place any target ports online by entering one of the following commands, once for each port:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">If the system&#8230;&#8203;</th>
<th class="tableblock halign-left valign-top">Then…</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Has storage disks</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>network fcp adapter modify -node &lt;node_name&gt; -adapter&lt;adapter_name&gt; -state up</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Is a V-Series system or has FlexArray Virtualization Software and is connected to storage arrays</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>fcp config &lt;adapter_name&gt; up</code></p></td>
</tr>
</tbody>
</table>
</li>
<li>
<p><a id="step11"></a>Cable the port.</p>
</li>
<li>
<p><a id="step12"></a>Take one of the following actions:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">If the system&#8230;&#8203;</th>
<th class="tableblock halign-left valign-top">Then…</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Has storage disks</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Go to <a href="verifying_the_node3_installation.html">Verify the node3 installation</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Is a V-Series system or has FlexArray Virtualization Software and is connected to storage arrays</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Resume at <a href="stage_3_installing_and_booting_node3_overview.html#step23">Step 23</a>.</p></td>
</tr>
</tbody>
</table>
</li>
<li>
<p><a id="step13"></a>Exit Maintenance mode by using the following command:</p>
<div class="paragraph">
<p><code>halt</code></p>
</div>
</li>
<li>
<p><a id="step14"></a>Boot node into boot menu by running <code>boot_ontap menu</code>. If you are upgrading to an A800, go to <a href="#step23">Step 23</a>.</p>
</li>
<li>
<p><a id="step15"></a>On node3, go to the boot menu and using 22/7 and select the hidden option <code>boot_after_controller_replacement</code>. At the prompt, enter node1 to reassign the disks of node1 to node3, as per the following example.</p>
<div class="literalblock">
<div class="content">
<pre>LOADER-A&gt; boot_ontap menu
.
&lt;output truncated&gt;
.
All rights reserved.
*******************************
*                             *
* Press Ctrl-C for Boot Menu. *
*                             *
*******************************
.
&lt;output truncated&gt;
.
Please choose one of the following:
(1)  Normal Boot.
(2)  Boot without /etc/rc.
(3)  Change password.
(4)  Clean configuration and initialize all disks.
(5)  Maintenance mode boot.
(6)  Update flash from backup config.
(7)  Install new software first.
(8)  Reboot node.
(9)  Configure Advanced Drive Partitioning.
(10) Set Onboard Key Manager recovery secrets.
(11) Configure node for external key management.
Selection (1-11)? 22/7
(22/7) Print this secret List
(25/6) Force boot with multiple filesystem disks missing.
(25/7) Boot w/ disk labels forced to clean.
(29/7) Bypass media errors.
(44/4a) Zero disks if needed and create new flexible root volume.
(44/7) Assign all disks, Initialize all disks as SPARE, write DDR labels
.
&lt;output truncated&gt;
.
(wipeconfig)                        Clean all configuration on boot device
(boot_after_controller_replacement) Boot after controller upgrade
(boot_after_mcc_transition)         Boot after MCC transition
(9a)                                Unpartition all disks and remove their ownership information.
(9b)                                Clean configuration and initialize node with partitioned disks.
(9c)                                Clean configuration and initialize node with whole disks.
(9d)                                Reboot the node.
(9e)                                Return to main boot menu.
The boot device has changed. System configuration information could be lost. Use option (6) to restore the system configuration, or option (4) to initialize all disks and setup a new system.
Normal Boot is prohibited.
Please choose one of the following:
(1)  Normal Boot.
(2)  Boot without /etc/rc.
(3)  Change password.
(4)  Clean configuration and initialize all disks.
(5)  Maintenance mode boot.
(6)  Update flash from backup config.
(7)  Install new software first.
(8)  Reboot node.
(9)  Configure Advanced Drive Partitioning.
(10) Set Onboard Key Manager recovery secrets.
(11) Configure node for external key management.
Selection (1-11)? boot_after_controller_replacement
This will replace all flash-based configuration with the last backup to disks. Are you sure you want to continue?: yes
.
&lt;output truncated&gt;
.
Controller Replacement: Provide name of the node you would like to replace:&lt;nodename of the node being replaced&gt;
Changing sysid of node node1 disks.
Fetched sanown old_owner_sysid = 536940063 and calculated old sys id = 536940063
Partner sysid = 4294967295, owner sysid = 536940063
.
&lt;output truncated&gt;
.
varfs_backup_restore: restore using /mroot/etc/varfs.tgz
varfs_backup_restore: attempting to restore /var/kmip to the boot device
varfs_backup_restore: failed to restore /var/kmip to the boot device
varfs_backup_restore: attempting to restore env file to the boot device
varfs_backup_restore: successfully restored env file to the boot device wrote key file "/tmp/rndc.key"
varfs_backup_restore: timeout waiting for login
varfs_backup_restore: Rebooting to load the new varfs
Terminated
&lt;node reboots&gt;
System rebooting...
.
Restoring env file from boot media...
copy_env_file:scenario = head upgrade
Successfully restored env file from boot media...
Rebooting to load the restored env file...
.
System rebooting...
.
&lt;output truncated&gt;
.
WARNING: System ID mismatch. This usually occurs when replacing a boot device or NVRAM cards!
Override system ID? {y|n} y
.
Login:</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
In the above console output example, ONTAP will prompt you for the partner node name if the system uses Advanced Disk Partitioning (ADP) disks.
</td>
</tr>
</table>
</div>
</li>
<li>
<p><a id="step16"></a>If the system goes into a reboot loop with the message <code>no disks found</code>, it indicates that the system has reset the FC or UTA/UTA2 ports back to the target mode and therefore is unable to see any disks. To resolve this continue with <a href="#step17">Step 17</a> to <a href="#step22">Step 22</a>, or go to section <a href="verifying_the_node3_installation.html">Verify the node3 installation</a>.</p>
</li>
<li>
<p><a id="step17"></a>Press Ctrl-C during autoboot to stop the node at the <code>LOADER&gt;</code> prompt.</p>
</li>
<li>
<p><a id="step18"></a>At the loader prompt, enter maintenance mode by using the following command:</p>
<div class="paragraph">
<p><code>boot_ontap maint</code></p>
</div>
</li>
<li>
<p><a id="step19"></a>In maintenance mode, display all the previously set initiator ports that are now in target mode by using the following command:</p>
<div class="paragraph">
<p><code>ucadmin show</code></p>
</div>
<div class="paragraph">
<p>Change the ports back to initiator mode by using the following command:</p>
</div>
<div class="paragraph">
<p><code>ucadmin modify -m fc -t initiator -f &lt;adapter name&gt;</code></p>
</div>
</li>
<li>
<p><a id="step20"></a>Verify that the ports have been changed to initiator mode by using the following command:</p>
<div class="paragraph">
<p><code>ucadmin show</code></p>
</div>
</li>
<li>
<p><a id="step21"></a>Exit maintenance mode by using the following command:</p>
<div class="paragraph">
<p><code>halt</code></p>
</div>
</li>
<li>
<p><a id="step22"></a>At the loader prompt boot up, by using the following command:</p>
<div class="paragraph">
<p><code>boot_ontap</code></p>
</div>
<div class="paragraph">
<p>Now, on booting, the node can detect all the disks that were previously assigned to it and can boot up as expected.</p>
</div>
</li>
<li>
<p><a id="step23"></a>If you are upgrading from a system with external disks to a system that supports internal and external disks (AFF A800 systems, for example), set the node1 aggregate as the root aggregate to ensure node3 boots from the root aggregate of node1. To set the root aggregate, go to the boot menu and select option <code>5</code> to enter maintenance mode.</p>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
You must perform the following substeps in the exact order shown; failure to do so might cause an outage or even data loss.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following procedure sets node3 to boot from the root aggregate of node1:</p>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Enter maintenance mode by using the following command:</p>
<div class="paragraph">
<p><code>boot_ontap maint</code></p>
</div>
</li>
<li>
<p>Check the RAID, plex, and checksum information for the node1 aggregate by using the following command:</p>
<div class="paragraph">
<p><code>aggr status -r</code></p>
</div>
</li>
<li>
<p>Check the status of the node1 aggregate by using the following command:</p>
<div class="paragraph">
<p><code>aggr status</code></p>
</div>
</li>
<li>
<p>If necessary, bring the node1 aggregate online by using the following command:</p>
<div class="paragraph">
<p><code>aggr_online root_aggr_from_&lt;node1&gt;</code></p>
</div>
</li>
<li>
<p>Prevent the node3 from booting from its original root aggregate by using the following command:</p>
<div class="paragraph">
<p><code>aggr offline &lt;root_aggr_on_node3&gt;</code></p>
</div>
</li>
<li>
<p>Set the node1 root aggregate as the new root aggregate for node3 by using the following command:</p>
<div class="paragraph">
<p><code>aggr options aggr_from_&lt;node1&gt; root</code></p>
</div>
</li>
<li>
<p>Verify that the root aggregate of node3 is offline and the root aggregate for the disks brought over from node1 is online and set to root by using the following command:</p>
<div class="paragraph">
<p><code>aggr status</code></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Failing to perform the previous substep might cause node3 to boot from the internal root aggregate, or it might cause the system to assume a new cluster configuration exists or prompt you to identify one.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following shows an example of the command output:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>Aggr            State   Status    Options
aggr 0_nst_fas  8080_15 online    raid_dp, aggr root,  nosnap=on
                                  fast zeroed, 64-bit
aggr            0       offline   raid_dp, aggr, diskroot
                                  fast zeroed, 64-bit</pre>
</div>
</div>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
</div>

    </article>
    <!-- Page Container -->
  </div>

  
  <!-- Start Page Toolbar -->
  <div class="page-nav-toolbar">
    <div class="page-nav-contribute"  >
      <div class="page-nav-contribute-title">CONTRIBUTE</div>
      <a target="_blank" href="https://github.com/NetAppDocs/ontap-systems/blob/main/upgrade-arl-auto-app/setting_the_fc_or_uta_uta2_configuration_on_node3.adoc" class="btn btn-default githubEditButton" role="button"><img src="/us-en/ontap-systems/images/github.png" class="github-icon" />Edit on GitHub</a>
      <a target="_blank" href="https://github.com/NetAppDocs/ontap-systems/issues/new?body=Page%3A%20[Set the FC or UTA/UTA2 configuration on node3](https://docs.netapp.com/us-en/ontap-systems/upgrade-arl-auto-app/setting_the_fc_or_uta_uta2_configuration_on_node3.html)" class="btn btn-default githubEditButton" role="button"><img src="/us-en/ontap-systems/images/github.png" class="github-icon" />Request doc changes</a>
      <a target="_blank" href="https://docs.netapp.com/us-en/contribute/" class="page-nav-contribute-link"  >Contributor's Guide</a>
    </div>
    <div class="page-nav-container">
      <nav class="page-nav-fixed">
        <div class="page-nav-title">ON THIS PAGE</div>
        <div class="page-nav-links">
          <ul class="page-nav-inner" id="page-menu"></ul>
        </div>
      </nav>
    </div>
  </div>
  
  <div style="clear: both"></div><!-- Main needs to have height -->
</div>

        </main>

        <footer class="n-footer">
  <div class="n-footer__bottom">
    <div class="n-container">
      <div class="n-footer__bottom-left">

        <div class="n-footer__copyright">
          <ul class="n-footer__copyright-list">
            <li class="n-footer__copyright-link">
            <a href="https://www.netapp.com/us/legal/copyright.aspx">© 2021 NetApp, Inc.</a>
            </li>

</ul>
</div>
<div class="n-footer__social-links">
<ul class="n-footer__social-link-list">
<li class="n-footer__social-link-list-item">
<a class="n-footer__social-link" data-ntap-social="follow-blog" href="https://blog.netapp.com" target="_blank" title="blog" alt="blog">
<span class="n-footer__social-link-text">blog</span>
<svg class="n-icon-blog n-footer__social-link-icon" aria-labelledby="title">
  <title>blog@</title>
  <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/us-en/ontap-systems/common/svg/sprite.svg#blog"></use>
</svg>

</a>
</li>
<li class="n-footer__social-link-list-item">
<a class="n-footer__social-link" data-ntap-social="follow-community" href="https://community.netapp.com/" target="_blank" title="community" alt="community">
<span class="n-footer__social-link-text">community</span>
<svg class="n-icon-community n-footer__social-link-icon" aria-labelledby="title">
<title>community@</title>
<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/us-en/ontap-systems/common/svg/sprite.svg#comments"></use>
</svg>

</a>
</li>
<li class="n-footer__social-link-list-item">
<a class="n-footer__social-link" data-ntap-social="follow-twitter" href="https://twitter.com/netapp" target="_blank" title="twitter" alt="twitter">
<span class="n-footer__social-link-text">twitter</span>
<svg class="n-icon-twitter n-footer__social-link-icon" aria-labelledby="title">
<title>twitter@</title>
<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/us-en/ontap-systems/common/svg/sprite.svg#twitter"></use>
</svg>

</a>
</li>
<li class="n-footer__social-link-list-item">
<a class="n-footer__social-link" data-ntap-social="follow-facebook" href="https://www.facebook.com/NetApp" target="_blank" title="facebook" alt="facebook">
<span class="n-footer__social-link-text">facebook</span>
<svg class="n-icon-facebook n-footer__social-link-icon" aria-labelledby="title">
<title>facebook@</title>
<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/us-en/ontap-systems/common/svg/sprite.svg#facebook"></use>
</svg>

</a>
</li>
<li class="n-footer__social-link-list-item">
<a class="n-footer__social-link" data-ntap-social="follow-linkedin" href="https://www.linkedin.com/company/netapp" target="_blank" title="linkedin" alt="linkedin">
<span class="n-footer__social-link-text">linkedin</span>
<svg class="n-icon-linkedin n-footer__social-link-icon" aria-labelledby="title">
<title>linkedin@</title>
<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/us-en/ontap-systems/common/svg/sprite.svg#linkedin"></use>
</svg>

</a>
</li>
<li class="n-footer__social-link-list-item">
<a class="n-footer__social-link" data-ntap-social="follow-youtube" href="https://www.youtube.com/user/NetAppTV" target="_blank" title="youtube" alt="youtube">
<span class="n-footer__social-link-text">youtube</span>
<svg class="n-icon-youtube n-footer__social-link-icon" aria-labelledby="title">
<title>youtube@</title>
<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/us-en/ontap-systems/common/svg/sprite.svg#youtube"></use>
</svg>

</a>
</li>
<li class="n-footer__social-link-list-item">
<a class="n-footer__social-link" data-ntap-social="follow-slideshare" href="https://www.slideshare.net/NetApp" target="_blank" title="slideshare" alt="slideshare">
<span class="n-footer__social-link-text">slideshare</span>
<svg class="n-icon-slideshare n-footer__social-link-icon" aria-labelledby="title">
<title>slideshare@</title>
<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/us-en/ontap-systems/common/svg/sprite.svg#slideshare"></use>
</svg>

</a>
</li>
</ul>
</div>

</div>
<div class="n-footer__bottom-right">
  <p class="n-footer__fine-print">Have feedback for our website?<a target="_self" href="javascript:netapp_mailto()" class="n-footer__copyright">Let us know</a>
  <a href="https://docs.netapp.com/us-en/announcements/" class="n-footer__copyright">Announcements</a>
  </p>
</div>
</div>
</div>
</footer>

      </div>

      <!-- Elasticsearch JS -->
      <script type="text/javascript" src='/us-en/ontap-systems/js/bundle.js'></script>

      <!-- Syntax Highlighting -->
      <script type="text/javascript" src='/us-en/ontap-systems/js/prism.js'></script>
      <script type="text/javascript" src='/us-en/ontap-systems/js/prism-curl.js'></script>
    </div>
    <script>
      document.body.offsetWidth=1903;
      cookieLaw = {}
      cookieLaw.euCountry = "US";
      cookieLaw.invoke = function(){return false;}
    </script>
    <script src='/us-en/ontap-systems/js/www-ntap.js'></script>
  </body>

  
</html>
