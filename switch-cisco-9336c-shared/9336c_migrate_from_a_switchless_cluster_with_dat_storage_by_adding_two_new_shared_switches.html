<!DOCTYPE html>
<html lang="en">
  <head class="at-element-marker">
  <title>Migrate from a switchless cluster with DAT storage by adding two new shared switches</title>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge,chrome=1">
  <meta http-equiv="language" content="en">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta property="og:title" content="Migrate from a switchless cluster with DAT storage by adding two new shared switches" />
	<meta property="og:type" content="website" />
	<meta property="og:url" content="https://docs.netapp.com/us-en/ontap-systems/switch-cisco-9336c-shared/9336c_migrate_from_a_switchless_cluster_with_dat_storage_by_adding_two_new_shared_switches.html" />
	<meta property="og:description" content="" />
  <meta property="og:image" content="https://docs.netapp.com/us-en/ontap-systems/images/logo-tophat-social.png" />
  <meta property="og:image:alt" content="NetApp Logo" />
  <meta name="format-detection" content="telephone=no">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="encoding" content="utf-8">
  <meta http-equiv="nss-type" content="Product Documentation"/>
  <meta http-equiv="nss-subtype" content="User Guide"/>
  
  <meta name="description" content="">
  <meta name="keywords" content=" ">
  
  

  <!-- Icons -->
  <link rel="icon" href="/us-en/ontap-systems/images/favicon.ico" type="image/x-icon">

  <!-- RSS Feed -->
  

  <!-- CSS Definitions: NetApp CSS should be defined after generic css -->

  <!-- Elastic Search -->
  <link rel="stylesheet" href="//cdn.jsdelivr.net/searchkit/0.10.0/theme.css">

  <!-- Controls AsciiDoctor Admonition Blocks -->
  <link rel="stylesheet" type="text/css" href="/us-en/ontap-systems/css/font-awesome.min.css">

  <!-- Controls the shadow effect for search dropdown menu -->
  <link rel="stylesheet" href="/us-en/ontap-systems/css/boxshadowproperties.css">

  <!-- NetApp CSS controls the technical content -->
  <link rel="stylesheet" type="text/css" href="/us-en/ontap-systems/css/netapp.css">

  <!-- WWW CSS Content -->
  <link rel="stylesheet" type="text/css" href="/us-en/ontap-systems/css/www-luci-dotcom.min.css">
  <link rel="stylesheet" type="text/css" href="/us-en/ontap-systems/css/www-netapp-dotcom.css">
  <link rel="stylesheet" href="/us-en/ontap-systems/css/www-netapp-library-critical.min.css" media="all" >
  <link rel="stylesheet" href="/us-en/ontap-systems/css/www-netapp-library-non-critical.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <link rel="stylesheet" href="/us-en/ontap-systems/css/www-netapp-library-global-header-footer.min.css">

  <!-- NetApp IE Customizations -->
  <link rel="stylesheet" href='/us-en/ontap-systems/css/na-utility.css' type='text/css'>
  <link rel="stylesheet" href='/us-en/ontap-systems/css/na-sidebar.css' type='text/css'>
  <link rel='stylesheet' href='/us-en/ontap-systems/css/clouddocs.css' type='text/css'>
  <link rel='stylesheet' href='/us-en/ontap-systems/css/na-pagenav.css' type='text/css'>

  

  
  <link rel='stylesheet' href='/us-en/ontap-systems/css/na-feature.css' type='text/css'>
  


  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
  <!-- Used to import Promise for IE. Required for SearchKit -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/bluebird/3.3.5/bluebird.min.js"></script>
  
    <script src='/us-en/ontap-systems/js/na-search.js'></script>
  

  
  <script src='/us-en/ontap-systems/js/na-pagenav.js'></script>
  

  <link rel='stylesheet' href='/us-en/ontap-systems/css/prism.css' type='text/css'>
  <link rel='stylesheet' href='/us-en/ontap-systems/css/prism-netapp.css' type='text/css'>


  <script src='/us-en/ontap-systems/js/na-utility.js'></script>
  <script src='/us-en/ontap-systems/js/clouddocs.js'></script>
  <script>
  if (document.location.hostname === "docs.netapp.com") {
    var head = document.getElementsByTagName('head')[0];
    var adobe = document.createElement("script");
    adobe.type = "text/javascript";
    adobe.src = "//assets.adobedtm.com/60287eadf1ee/c284da483c83/launch-e9ff3acac59f.min.js";
    head.appendChild(adobe);
  }
  </script>
  <script src='/us-en/ontap-systems/js/jquery.navgoco.min.js'></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
  <script src='/us-en/ontap-systems/js/toc.js'></script>
  <script src='/us-en/ontap-systems/js/customscripts.js'></script>

  <script>
      $(document).ready(function() {
          
          var collapseOnInit = true;
          

          var navSettings = {
              "caretHtml": '',
              "accordion": collapseOnInit,
              "openClass": 'active', // open
              "save": false, // leave false or nav highlighting doesn't work right
              "cookie": {
                  "name": 'navgoco',
                  "expires": false,
                  "path": '/'
              },
              "slide": {
                  "duration": 400,
                  "easing": 'swing'
              }
          };

          // Initialize navgoco with default options
          $("#mysidebar").navgoco(navSettings);
          

          $("#collapseAll").click(function(e) {
              e.preventDefault();
              $("#mysidebar").navgoco('toggle', false);
          });

          $("#expandAll").click(function(e) {
              e.preventDefault();
              $("#mysidebar").navgoco('toggle', true);
          });

      });

  </script>
  <script>
      $(document).ready(function() {
          $("#tg-sb-link").click(function() {
              $("#tg-sb-sidebar").toggle();
              $("#tg-sb-content").toggleClass('col-md-9');
              $("#tg-sb-content").toggleClass('col-md-12');
              $("#tg-sb-icon").toggleClass('fa-toggle-on');
              $("#tg-sb-icon").toggleClass('fa-toggle-off');
          });
      });
  </script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-81697994-3"></script>
  <script>
  if (document.location.hostname === "docs.netapp.com") {
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-81697994-3');
  }
  </script>
</head>


  <body class role="document">
    <div id="page" class="n-off-canvas-menu">
      <div class="n-off-canvas-menu__menu"><!--TODO: Add offcanvas code --></div>
      <div class="n-off-canvas-menu__content-wrap">
        <header class="site-header" id="banner">
  <!-- Start top_hat -->
  <div class="n-top-hat">
    <div class="n-container">
      <div class="n-top-hat__cross-property-nav">
        <ul class="n-top-hat__list">
          <li class="n-top-hat__list-item">
            <a href="https://www.netapp.com/products-a-z/" class="n-top-hat__link">Product and Solutions</a>
          </li>
          <li class="n-top-hat__list-item">
            <a href="https://www.netapp.com/support-and-training/netapp-university/" class="n-top-hat__link">Support and Training</a>
          </li>
          <li class="n-top-hat__list-item">
            <a href="https://cloud.netapp.com" class="n-top-hat__link">Cloud Central</a>
          </li>
          <li class="n-top-hat__list-item">
            <a href="https://community.netapp.com/" class="n-top-hat__link">Community</a>
          </li>
          <li class="n-top-hat__list-item">
            <a href="https://blog.netapp.com/" class="n-top-hat__link">Blog</a>
          </li>
          <li class="n-top-hat__list-item">
            <a href="https://customers.netapp.com/en/" class="n-top-hat__link">Customer Stories</a>
          </li>
          <li class="n-top-hat__list-item">
            <a href="https://www.netapp.com/us/contact-us/index.aspx" target="_self" class="n-top-hat__link" data-ntap-ui="contact-us">Contact</a>
          </li>
        </ul>
      </div>
      <div class="n-top-hat__utils">
        <ul class="n-top-hat__list">
          <li class="n-top-hat__list-item">
            <a href="https://www.netapp.com/us/contact-us/index.aspx" target="_self" class="n-top-hat__link" data-ntap-ui="contact-us">Contact</a>
          </li>
        </ul>
      </div>
    </div>
  </div>
  <!-- End top_hat -->

  <!-- Start property bar -->
  <style>
    .n-property-navigation-bar__menus--desktop-experience .n-menu--mega__default-content__heading span {
    color: #34B0FF;
    }
  </style>
  <div class="n-property-bar " data-ntap-ui="sticky-nav">
    <div class="n-property-bar__inner-wrap">
      <div class="n-property-bar__menu-toggle">
        <a href="#" class="n-property-bar__menu-toggle-link">
          <span class="n-property-bar__menu-toggle-text">Menu</span>
          <svg class="n-icon-bars n-property-bar__menu-toggle-icon" aria-labelledby="title">
            <title>bars</title>
            <use xlink:href="/us-en/ontap-systems/common/svg/sprite.svg#bars"></use>
          </svg>
        </a>
      </div>
      <div class="n-property-bar__property-mark ">
        <a href="https://www.netapp.com" class="n-property-bar__property-link">
          <div class="n-property-bar__logo">
            <svg class="n-icon-netapp-mark n-icon-netapp-mark n-property-bar__netapp-mark-icon" aria-labelledby="title">
              <title>netapp-mark</title>
              <use xlink:href="/us-en/ontap-systems/common/svg/sprite.svg#netapp-mark"></use>
            </svg>
            <svg class="n-icon-netapp-logo n-property-bar__logo-svg" aria-labelledby="title">
              <title>netapp-logo</title>
              <use xlink:href="/us-en/ontap-systems/common/svg/sprite.svg#netapp-logo"></use>
            </svg>
          </div>
        </a>
      </div>

      
      <div class="search-property-bar">
        <div id="search-demo-container" class="searchbox n-property-bar__search">
          <div id="react-search" data-type="widget" data-placeholder="Search Documentation" data-no-results-found="No results were found for {query}" data-did-you-mean="Search for {suggestion}." data-no-results-found-did-you-mean="No results found for {query}. Did you mean {suggestion}?" data-results-found="{hitCount} results found"  ></div>
          <button class="n-property-bar__search-toggle-button" type="button">
            <svg class="n-icon-search n-property-bar__search-toggle-button-icon" aria-labelledby="title">
              <title>search</title>
              <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/us-en/ontap-systems/common/svg/sprite.svg#search"></use>
            </svg>
          </button>
        </div>
      </div>
      
    </div>
  </div>
  <div class="n-property-bar__toolbar"><!-- Start Language Selector --><!-- End Language Selector -->

    <div class="n-property-bar__cta"></div>
  </div>
  <script>
    $(function(){
        var currentLocalization = $('html').attr('lang');

        var localizationsDictionary = {
            "en-CA" : "https://www.netapp.com/search/index.aspx?for_cr=canada&",
            "en-IN" : "https://www.netapp.com/search/index.aspx?for_cr=india&",
            "nl-NL" : "https://www.netapp.com/search/index.aspx?for_cr=netherlands&",
            "ru-RU" : "https://www.netapp.com/search/index.aspx?for_cr=russia&",
            "sv-SE" : "https://www.netapp.com/search/index.aspx?for_cr=sweden&",
            "it-IT" : "https://www.netapp.com/search/index.aspx?for_cr=italy&",
            "he-IL" : "https://www.netapp.com/search/index.aspx?for_cr=israel&",
            "ko-KR" : "https://www.netapp.com/search/index.aspx?for_cr=korea&",
            "zh-TW" : "https://www.netapp.com/search/index.aspx?for_cr=taiwan&",
            "en-GB" : "https://www.netapp.com/search/index.aspx?for_cr=unitedkingdom&",
            "en-SG" : "https://www.netapp.com/search/index.aspx?for_cr=asean&",
            "en-AU" : "https://www.netapp.com/search/index.aspx?for_cr=australia&",
            "pt-BR" : "https://www.netapp.com/search/index.aspx?for_cr=brasil&",
            "de-CH" : "https://www.netapp.com/search/index.aspx?for_cr=switzerland&",
            "es-MX" : "https://www.netapp.com/search/index.aspx?for_cr=mexico&"
        };

        if($('html').hasClass('ntap-whitelisted') && localizationsDictionary.hasOwnProperty(currentLocalization)) {
            $('.n-property-bar__property-link').attr('href', '/');
        }
    });
  </script>
  <!-- End property bar -->
</header>

        <div class="ie-utility">
  <div class="ie-menu">
    <div class="n-breadcrumb">
      <ul class="n-breadcrumb__list">
        <li class="n-breadcrumb__list-item">
          <a href="https://www.netapp.com">Home</a>
        </li>
        <li class="n-breadcrumb__list-item">
          <a href="https://docs.netapp.com">Documentation</a>
        </li>
        

        <li class="n-breadcrumb__list-item">
          <a href="/us-en/ontap-systems/">ONTAP&nbsp;Systems</a>
        </li>
        <li class="n-breadcrumb__list-item">
          Migrate from a switchless cluster with DAT storage by adding two new shared switches
        </li>
      </ul>
    </div>

    <div style="clear: both"></div><!-- Main needs to have height -->
  </div>
</div>


        <main id="n-main-content" class="n-main-content">
          <!-- Start Documentation Content -->
<div class="ie-main">
  <!-- Sidebar Column -->
  
  <div class="col-md-3" >
      <div class="n-pdf-header">
  <a id="toggleButtonPdf" class="n-pdf-button" type="button">PDFs<span>
    </span>
  </a>
</div>
<ul id="toggleContainerPdf" class="n-pdf-body" style="display:none;"><div class="n-pdf-section">
      <span class="n-pdf-section-title">Site</span>
    </div>
    <li>
      <a target="_blank" href="/us-en/ontap-systems/pdfs/fullsite-switch-cisco-9336c-shared_sidebar/Cisco_Nexus_9336C_FX2_Shared_Switches.pdf" >
        <img src="/us-en/ontap-systems/images/pdf.png" width="20" height="20"/>
        Cisco Nexus 9336C-FX2 Shared Switches
      </a>
    </li>






    <div class="n-pdf-section">
  <span class="n-pdf-section-title">This page</span>
</div>

<li class="active">
  <a target="_blank" href="/us-en/ontap-systems/pdfs/pages/switch-cisco-9336c-shared/9336c_migrate_from_a_switchless_cluster_with_dat_storage_by_adding_two_new_shared_switches.pdf" >
    <img src="/us-en/ontap-systems/images/pdf.png" width="20" height="20"/>
    Migrate from a switchless cluster with DAT storage by adding two new shared switches
  </a>
</li>


  










</ul>

<script>
  $("#toggleContainerPdf li.active").parents('li').toggle('display');
  $("#toggleContainerPdf li.active").parents('span.subfolders').toggle('display');
  $("#toggleButtonPdf").click(function () {
    $("#toggleContainerPdf").toggle('display');
  });
</script><ul id="mysidebar" class="nav"><li class=" "><a class="na-navbar-padding" href="index.html">
        Cisco Nexus 9336C-FX2 Shared Switches
      </a></li><li class=" "><a class="na-navbar-padding" href="9336c_setup_and_configuration_guide_for_cisco_shared_switches.html">
        Setup and configuration guide for Cisco shared switches
      </a></li><li class=" "><a class="na-navbar-padding" href="9336c_install_nx-os_software_and_reference_configuration_files_@rcfs@.html">
        Install NX-OS software and Reference Configuration Files (RCFs)
      </a></li><li class="  active "><a class="na-navbar-padding" href="9336c_migrate_from_a_switchless_cluster_with_dat_storage_by_adding_two_new_shared_switches.html">
        Migrate from a switchless cluster with DAT storage by adding two new shared switches
      </a></li><li class=" "><a class="na-navbar-padding" href="9336c_migrate_from_a_switched_configuration_with_dat_storage_by_adding_two_new_shared_switches.html">
        Migrate from a switched configuration with DAT storage by adding two new shared switches
      </a></li><li class=" "><a class="na-navbar-padding" href="9336c_migrate_from_a_switchless_configuration_with_sat_storage_by_reusing_the_storage_switches.html">
        Migrate from a switchless configuration with SAT storage by reusing the storage switches
      </a></li><li class=" "><a class="na-navbar-padding" href="9336c_migrate_from_a_switched_cluster_with_sat_storage_by_reusing_the_storage_switches.html">
        Migrate from a switched cluster with SAT storage by reusing the storage switches
      </a></li><li class=" "><a class="na-navbar-padding" href="9336c_replace_a_cisco_nexus_9336c-fx2_shared_switch.html">
        Replace a Cisco Nexus 9336C-FX2 shared switch
      </a></li></ul>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

  </div>
  

  <div class="ie-content-pane n-doc__component-detail-content n-doc__component-detail-content--show-code">
    <!-- Begin of page container -->
    <article class="page-content">
      



<div class="n-doc__component-detail-heading-wrap">
  <h1 class="n-doc__component-detail-heading">Migrate from a switchless cluster with DAT storage by adding two new shared switches</h1>
</div>


<p class="page-details">
  
    
    <time datetime="2021-05-12 13:48:11 +0000">05/12/2021</time>
    
  

<span>Contributors
  <a target="_blank" href="https://github.com/netapp-aherbin">
    <img  class="avatar avatar-small"
          alt="netapp-aherbin"
          width="20" height="20"
          src="https://avatars.githubusercontent.com/u/38955266?v=4"
          style="border-radius: 50%;"/>
  </a>
  
</span>


  <span>
    <a target="_blank" href="/us-en/ontap-systems/pdfs/pages/switch-cisco-9336c-shared/9336c_migrate_from_a_switchless_cluster_with_dat_storage_by_adding_two_new_shared_switches.pdf" role="button">
      <img src="/us-en/ontap-systems/images/pdf.png" width="20" height="20"/>Download PDF of this page</a>
  </span>


</p>


<div class="sect3">
<h4 id="migrate-from-a-switchless-cluster-with-dat-storage">Migrate from a switchless cluster with DAT storage</h4>
<div class="paragraph">
<p>You must be aware of certain configuration information, port connections, and cabling requirements when you migrate a two-node switchless cluster, non-disruptively, to a cluster with Cisco Nexus 9336C-FX2 cluster switches. The procedure you use depends on whether you have two dedicated cluster-network ports on each controller or a single cluster port on each controller. The process documented works for all nodes using optical or Twinax ports but is not supported on this switch if nodes are using onboard 10Gb BASE-T RJ45 ports for the cluster-network ports.</p>
</div>
<div class="paragraph">
<p>Most systems require two dedicated cluster-network ports on each controller. See  <a href="https://mysupport.netapp.com/site/info/cisco-ethernet-switch">Cisco Ethernet Switches</a> for more information.</p>
</div>
<div class="paragraph">
<p>If you have an existing two-node switchless cluster environment, you can migrate to a two-node switched cluster environment using Cisco Nexus 9336C-FX2 switches to enable you to scale beyond two nodes in the cluster.</p>
</div>
<div class="sect4">
<h5 id="before-you-begin">Before you begin</h5>
<div class="ulist">
<ul>
<li>
<p>Two-node switchless configuration:</p>
<div class="ulist">
<ul>
<li>
<p>The two-node switchless configuration must be properly set up and functioning.</p>
</li>
<li>
<p>The nodes must be running ONTAP 9.8 and later.</p>
</li>
<li>
<p>All cluster ports must be in the <strong>up</strong> state.</p>
</li>
<li>
<p>All cluster logical interfaces (LIFs) must be in the <strong>up</strong> state and on their <strong>home</strong> ports.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Cisco Nexus 9336C-FX2 switch configuration:</p>
<div class="ulist">
<ul>
<li>
<p>Both switches must have management network connectivity.</p>
</li>
<li>
<p>There must be console access to the cluster switches.</p>
</li>
<li>
<p>Nexus 9336C-FX2 node-to-node switch and switch-to-switch connections must use Twinax or fiber cables.</p>
</li>
<li>
<p>The NetApp <a href="https://hwu.netapp.com">Hardware Universe</a> contains more information about cabling.</p>
</li>
<li>
<p>Inter-Switch Link (ISL) cables must be connected to ports 1/35 and 1/36 on both 9336C-FX2 switches.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Initial customization of the 9336C-FX2 switches must be completed. So that the:</p>
<div class="ulist">
<ul>
<li>
<p>9336C-FX2 switches are running the latest version of software</p>
</li>
<li>
<p>Reference Configuration Files (RCFs) have been applied to the switches</p>
</li>
<li>
<p>Any site customization, such as SMTP, SNMP, and SSH must be configured on the new switches.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="about-this-task">About this task</h5>
<div class="paragraph">
<p>The examples in this procedure use the following cluster switch and node nomenclature:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The names of the 9336C-FX2 switches are <em>cs1</em> and <em>cs2</em>.</p>
</li>
<li>
<p>The names of the cluster SVMs are <em>node1</em> and <em>node2</em>.</p>
</li>
<li>
<p>The names of the LIFs are <em>node1_clus1</em> and <em>node1_clus2</em> on node 1, and <em>node2_clus1</em> and <em>node2_clus2</em> on node 2 respectively.</p>
</li>
<li>
<p>The cluster1::*&gt; prompt indicates the name of the cluster.</p>
</li>
<li>
<p>The cluster ports used in this procedure are <em>e3a</em> and <em>e3b</em>, as per the AFF A400 controller. The <a href="https://hwu.netapp.com">Hardware Universe</a> contains the latest information about the actual cluster ports for your platforms.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="steps">Steps</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>If AutoSupport is enabled on this cluster, suppress automatic case creation by invoking an AutoSupport message:  <code>system node autosupport invoke -node * -type all -message MAINT=xh</code>.</p>
<div class="paragraph">
<p>where x is the duration of the maintenance window in hours.</p>
</div>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The AutoSupport message notifies technical support of this maintenance task so that automatic case creation is suppressed during the maintenance window.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p><a id="step2"></a>Change the privilege level to advanced, entering y when prompted to continue:<br>
<code>set -privilege advanced</code></p>
<div class="paragraph">
<p>The advanced prompt (*&gt;) appears.</p>
</div>
</li>
<li>
<p>Disable all node-facing ports (not ISL ports) on both the new cluster switches cs1 and cs2. You must not disable the ISL ports.</p>
<div class="paragraph">
<p>The following example shows that node-facing ports 1 through 34 are disabled on switch cs1:</p>
</div>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>cs1# config
Enter configuration commands, one per line. End with CNTL/Z.
cs1(config)# interface e/1-34
cs1(config-if-range)# shutdown</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p><a id="step4"></a>Verify that the ISL and the physical ports on the ISL between the two 9336C-FX2 switches cs1 and cs2 are up on ports 1/35 and 1/36:<br>
<code>show port-channel summary</code></p>
<div class="paragraph">
<p>The following example shows that the ISL ports are up on switch cs1:</p>
</div>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>cs1# show port-channel summary
Flags:  D - Down        P - Up in port-channel (members)
        I - Individual  H - Hot-standby (LACP only)
        s - Suspended   r - Module-removed
        b - BFD Session Wait
        S - Switched    R - Routed
        U - Up (port-channel)
        p - Up in delay-lacp mode (member)
        M - Not in use. Min-links not met
--------------------------------------------------------------------------------
Group Port-       Type     Protocol  Member Ports
      Channel
--------------------------------------------------------------------------------
1     Po1(SU)     Eth      LACP      Eth1/35(P)   Eth1/36(P)</pre>
</div>
</div>
<div class="paragraph">
<p>The following example shows that the ISL ports are up on switch cs2:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>       cs2# show port-channel summary
        Flags:  D - Down        P - Up in port-channel (members)
        I - Individual  H - Hot-standby (LACP only)
        s - Suspended   r - Module-removed
        b - BFD Session Wait
        S - Switched    R - Routed
        U - Up (port-channel)
        p - Up in delay-lacp mode (member)
        M - Not in use. Min-links not met
--------------------------------------------------------------------------------
Group Port-       Type     Protocol  Member Ports
      Channel
--------------------------------------------------------------------------------
1     Po1(SU)     Eth      LACP      Eth1/35(P)   Eth1/36(P)</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p><a id="step5"></a>Display the list of neighboring devices:<br>
<code>show cdp neighbors</code>.</p>
<div class="paragraph">
<p>This command provides information about the devices that are connected to the system. The following example lists the neighboring devices on switch cs1:</p>
</div>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>cs1# show cdp neighbors
Capability Codes: R - Router, T - Trans-Bridge, B - Source-Route-Bridge
                  S - Switch, H - Host, I - IGMP, r - Repeater,
                  V - VoIP-Phone, D - Remotely-Managed-Device,
                  s - Supports-STP-Dispute
Device-ID          Local Intrfce  Hldtme Capability  Platform      Port ID
cs2                Eth1/35        175    R S I s     N9K-C9336C    Eth1/35
cs2                Eth1/36        175    R S I s     N9K-C9336C    Eth1/36
Total entries displayed: 2</pre>
</div>
</div>
<div class="paragraph">
<p>The following example lists the neighboring devices on switch cs2:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>cs2# show cdp neighbors
Capability Codes: R - Router, T - Trans-Bridge, B - Source-Route-Bridge
                  S - Switch, H - Host, I - IGMP, r - Repeater,
                  V - VoIP-Phone, D - Remotely-Managed-Device,
                  s - Supports-STP-Dispute
Device-ID          Local Intrfce  Hldtme Capability  Platform      Port ID
cs1                Eth1/35        177    R S I s     N9K-C9336C    Eth1/35
cs1           )    Eth1/36        177    R S I s     N9K-C9336C    Eth1/36

Total entries displayed: 2</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p><a id="step6"></a>Verify that all cluster ports are up:<br>
<code>network port show - ipspace Cluster</code></p>
<div class="paragraph">
<p>Each port should display up for Link and healthy for Health Status:</p>
</div>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>cluster1::*&gt; network port show -ipspace Cluster

Node: node1
                                                  Speed(Mbps)  Health
Port      IPspace      Broadcast Domain Link MTU  Admin/Oper   Status
--------- ------------ ---------------- ---- ---- ------------ ---------
e3a       Cluster      Cluster          up   9000  auto/100000 healthy
e3b       Cluster      Cluster          up   9000  auto/100000 healthy

Node: node2
                                                  Speed(Mbps)  Health
Port      IPspace      Broadcast Domain Link MTU  Admin/Oper   Status
--------- ------------ ---------------- ---- ---- ------------ ---------
e3a       Cluster      Cluster          up   9000  auto/100000 healthy
e3b       Cluster      Cluster          up   9000  auto/100000 healthy
4 entries were displayed.</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="7">
<li>
<p><a id="step7"></a>Verify that all cluster LIFs are up and operational:<br>
<code>network interface show - vserver Cluster</code></p>
<div class="paragraph">
<p>Each cluster LIF should display true for <code>Is Home</code> and have a Status Admin/Oper of up/up.</p>
</div>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>cluster1::*&gt; network interface show -vserver Cluster
            Logical     Status     Network            Current       Current Is
Vserver     Interface   Admin/Oper Address/Mask       Node          Port    Home
----------- ---------- ---------- ------------------ ------------- ------- -----
Cluster
            node1_clus1  up/up    169.254.209.69/16  node1         e3a     true
            node1_clus2  up/up    169.254.49.125/16  node1         e3b     true
            node2_clus1  up/up    169.254.47.194/16  node2         e3a     true
            node2_clus2  up/up    169.254.19.183/16  node2         e3b     true
4 entries were displayed.</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="8">
<li>
<p><a id="step8"></a>Verify that auto-revert is enabled on all cluster LIFs:<br>
<code>network interface show - vserver Cluster -fields auto-revert</code></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>cluster1::*&gt; network interface show -vserver Cluster -fields auto-revert
       Logical
Vserver   Interface     Auto-revert
--------- ------------- ------------
Cluster
          node1_clus1   true
          node1_clus2   true
          node2_clus1   true
          node2_clus2   true
4 entries were displayed.</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="9">
<li>
<p><a id="step9"></a>Disconnect the cable from cluster port e3a on node1, and then connect e3a to port 1 on cluster switch cs1, using the appropriate cabling supported by the 9336C-FX2 switches.</p>
<div class="paragraph">
<p>The NetApp <a href="https://hwu.netapp.com">Hardware Universe</a> contains more information about cabling.</p>
</div>
</li>
<li>
<p>Disconnect the cable from cluster port e3a on node2, and then connect e3a to port 2 on cluster switch cs1, using the appropriate cabling supported by the 9336C-FX2 switches.</p>
</li>
<li>
<p>Enable all node-facing ports on cluster switch cs1.</p>
<div class="paragraph">
<p>The following example shows that ports 1/1 through 1/34 are enabled on switch cs1:</p>
</div>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>cs1# config
Enter configuration commands, one per line. End with CNTL/Z.
cs1(config)# interface e1/1-34
cs1(config-if-range)# no shutdown</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="12">
<li>
<p><a id="step12"></a>Verify that all cluster LIFs are <strong>up</strong>, operational, and display as true for <code>Is Home</code>:<br>
<code>network interface show - vserver Cluster</code></p>
<div class="paragraph">
<p>The following example shows that all the LIFs are <strong>up</strong> on node1 and node2 and that <code>Is Home</code> results are <strong>true</strong>:</p>
</div>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>cluster1::*&gt; network interface show -vserver Cluster
          Logical      Status     Network            Current     Current Is
Vserver   Interface    Admin/Oper Address/Mask       Node        Port    Home
--------- ------------ ---------- ------------------ ----------- ------- ----
Cluster
          node1_clus1  up/up      169.254.209.69/16  node1       e3a     true
          node1_clus2  up/up      169.254.49.125/16  node1       e3b     true
          node2_clus1  up/up      169.254.47.194/16  node2       e3a     true
          node2_clus2  up/up      169.254.19.183/16  node2       e3b     true
4 entries were displayed.</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="13">
<li>
<p><a id="step13"></a>Display information about the status of the nodes in the cluster:<br>
<code>cluster show</code></p>
<div class="paragraph">
<p>The following example displays information about the health and eligibility of the nodes in the cluster:</p>
</div>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>cluster1::*&gt; cluster show
Node                 Health  Eligibility   Epsilon
-------------------- ------- ------------  ------------
node1                true    true          false
node2                true    true          false
2 entries were displayed.</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="14">
<li>
<p><a id="step14"></a>Disconnect the cable from cluster port e3b on node1, and then connect e3b to port 1 on cluster switch cs2, using the appropriate cabling supported by the 9336C-FX2 switches.</p>
</li>
<li>
<p>Disconnect the cable from cluster port e3b on node2, and then connect e3b to port 2 on cluster switch cs2, using the appropriate cabling supported by the 9336C-FX2 switches.</p>
</li>
<li>
<p>Enable all node-facing ports on cluster switch cs2.</p>
<div class="paragraph">
<p>The following example shows that ports 1/1 through 1/34 are enabled on switch cs2:</p>
</div>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>cs2# config
Enter configuration commands, one per line. End with CNTL/Z.
cs2(config)# interface e1/1-34
cs2(config-if-range)# no shutdown</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="17">
<li>
<p><a id="step17"></a>Verify that all cluster ports are up:<br>
<code>network port show - ipspace Cluster</code></p>
<div class="paragraph">
<p>The following example shows that all the cluster ports are up on node1 and node2:</p>
</div>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>cluster1::*&gt; network port show -ipspace Cluster

Node: node1
                                                                        Ignore
                                                  Speed(Mbps)  Health   Health
Port      IPspace      Broadcast Domain Link MTU  Admin/Oper   Status   Status
--------- ------------ ---------------- ---- ---- ------------ -------- ------
e3a       Cluster      Cluster          up   9000  auto/100000 healthy  false
e3b       Cluster      Cluster          up   9000  auto/100000 healthy  false

Node: node2
                                                                        Ignore
                                                  Speed(Mbps)  Health   Health
Port      IPspace      Broadcast Domain Link MTU  Admin/Oper   Status   Status
--------- ------------ ---------------- ---- ---- ------------ -------- ------
e3a       Cluster      Cluster          up   9000  auto/100000 healthy  false
e3b       Cluster      Cluster          up   9000  auto/100000 healthy  false
4 entries were displayed.</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="18">
<li>
<p><a id="step18"></a>Verify that all interfaces display true for <code>Is Home</code>:<br>
<code>network interface show - vserver Cluster</code></p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This might take several minutes to complete.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following example shows that all LIFs are <strong>up</strong> on node1 and node2 and that <code>Is Home</code> results are true:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>cluster1::*&gt; network interface show -vserver Cluster
          Logical      Status     Network            Current    Current Is
Vserver   Interface    Admin/Oper Address/Mask       Node       Port    Home
--------- ------------ ---------- ------------------ ---------- ------- ----
Cluster
          node1_clus1  up/up      169.254.209.69/16  node1      e3a     true
          node1_clus2  up/up      169.254.49.125/16  node1      e3b     true
          node2_clus1  up/up      169.254.47.194/16  node2      e3a     true
          node2_clus2  up/up      169.254.19.183/16  node2      e3b     true
4 entries were displayed.</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="19">
<li>
<p><a id="step19"></a>Verify that both nodes each have one connection to each switch:<br>
<code>show cdp neighbors</code></p>
<div class="paragraph">
<p>The following example shows the appropriate results for both switches:</p>
</div>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>cs1# show cdp neighbors
Capability Codes: R - Router, T - Trans-Bridge, B - Source-Route-Bridge
                  S - Switch, H - Host, I - IGMP, r - Repeater,
                  V - VoIP-Phone, D - Remotely-Managed-Device,
                  s - Supports-STP-Dispute
Device-ID          Local Intrfce  Hldtme Capability  Platform      Port ID
node1              Eth1/1         133    H           AFFA400       e3a
node2              Eth1/2         133    H           AFFA400       e3a
cs2                Eth1/35        175    R S I s     N9K-C9336C    Eth1/35
cs2                Eth1/36        175    R S I s     N9K-C9336C    Eth1/36
Total entries displayed: 4
cs2# show cdp neighbors
Capability Codes: R - Router, T - Trans-Bridge, B - Source-Route-Bridge
                  S - Switch, H - Host, I - IGMP, r - Repeater,
                  V - VoIP-Phone, D - Remotely-Managed-Device,
                  s - Supports-STP-Dispute
Device-ID          Local Intrfce  Hldtme Capability  Platform      Port ID
node1              Eth1/1         133    H           AFFA400       e3b
node2              Eth1/2         133    H           AFFA400       e3b
cs1                Eth1/35        175    R S I s     N9K-C9336C    Eth1/35
cs1                Eth1/36        175    R S I s     N9K-C9336C    Eth1/36
Total entries displayed: 4</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="20">
<li>
<p><a id="step20"></a>Display information about the discovered network devices in your cluster:<br>
<code>network device-discovery show -protocol cdp</code></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>cluster1::*&gt; network device-discovery show -protocol cdp
Node/       Local  Discovered
Protocol    Port   Device (LLDP: ChassisID)  Interface         Platform
----------- ------ ------------------------- ----------------  ----------------
node2       /cdp
            e3a    cs1                       0/2               N9K-C9336C
            e3b    cs2                       0/2               N9K-C9336C

node1       /cdp
            e3a    cs1                       0/1               N9K-C9336C
            e3b    cs2                       0/1               N9K-C9336C
4 entries were displayed.</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="21">
<li>
<p><a id="step21"></a>Verify that the storage configuration of HA pair 1 (and HA pair 2) is correct and error free:<br>
<code>system switch ethernet show</code></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>storage::*&gt; system switch ethernet show
Switch                    Type                   Address         Model
------------------------- ---------------------- --------------- ----------
sh1
                          storage-network        172.17.227.5    C9336C

       Serial Number: FOC221206C2
        Is Monitored: true
              Reason: None
    Software Version: Cisco Nexus Operating System (NX-OS) Software, Version
                      9.3(5)
      Version Source: CDP
sh2
                          storage-network        172.17.227.6    C9336C
       Serial Number: FOC220443LZ
        Is Monitored: true
              Reason: None
    Software Version: Cisco Nexus Operating System (NX-OS) Software, Version
                      9.3(5)
      Version Source: CDP
2 entries were displayed.
storage::*&gt;</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="22">
<li>
<p><a id="step22"></a>Verify that the settings are disabled:<br>
<code>network options switchless-cluster show</code></p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
It might take several minutes for the command to complete. Wait for the '3-minute lifetime to expire' announcement.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <code>false</code> output in the following example shows that the configuration settings are disabled:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>cluster1::*&gt; network options switchless-cluster show
Enable Switchless Cluster: false</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="23">
<li>
<p><a id="step23"></a>Verify the status of the node members in the cluster:<br>
<code>cluster show</code></p>
<div class="paragraph">
<p>The following example shows information about the health and eligibility of the nodes in the cluster:</p>
</div>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>cluster1::*&gt; cluster show
Node                 Health  Eligibility   Epsilon
-------------------- ------- ------------  --------
node1                true    true          false
node2                true    true          false</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="24">
<li>
<p><a id="step24"></a>Ensure that the cluster network has full connectivity:<br>
<code>cluster ping-cluster -node node-name</code></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>cluster1::*&gt; cluster ping-cluster -node node2
Host is node2
Getting addresses from network interface table...
Cluster node1_clus1 169.254.209.69 node1 e3a
Cluster node1_clus2 169.254.49.125 node1 e3b
Cluster node2_clus1 169.254.47.194 node2 e3a
Cluster node2_clus2 169.254.19.183 node2 e3b
Local = 169.254.47.194 169.254.19.183
Remote = 169.254.209.69 169.254.49.125
Cluster Vserver Id = 4294967293
Ping status:
....
Basic connectivity succeeds on 4 path(s)
Basic connectivity fails on 0 path(s)
................
Detected 9000 byte MTU on 4 path(s):
Local 169.254.47.194 to Remote 169.254.209.69
Local 169.254.47.194 to Remote 169.254.49.125
Local 169.254.19.183 to Remote 169.254.209.69
Local 169.254.19.183 to Remote 169.254.49.125
Larger than PMTU communication succeeds on 4 path(s)
RPC status:
2 paths up, 0 paths down (tcp check)
2 paths up, 0 paths down (udp check)</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="25">
<li>
<p><a id="step25"></a>Change the privilege level back to admin:<br>
<code>set -privilege admin</code></p>
</li>
<li>
<p>Enable the Ethernet switch health monitor log collection feature for collecting switch-related log files, using the commands:</p>
<div class="ulist">
<ul>
<li>
<p><code>system switch ethernet log setup-password</code></p>
</li>
<li>
<p><code>system switch ethernet log enable-collection</code></p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>cluster1::*&gt; system switch ethernet log setup-password
Enter the switch name: &lt;return&gt;
The switch name entered is not recognized.

Choose from the following list:
cs1
cs2
cluster1::*&gt; system switch ethernet log setup-password
Enter the switch name: cs1
RSA key fingerprint is e5:8b:c6:dc:e2:18:18:09:36:63:d9:63:dd:03:d9:cc
Do you want to continue? {y|n}::[n] y
Enter the password: &lt;enter switch password&gt;
Enter the password again: &lt;enter switch password&gt;
cluster1::*&gt; system switch ethernet log setup-password
Enter the switch name: cs2
RSA key fingerprint is 57:49:86:a1:b9:80:6a:61:9a:86:8e:3c:e3:b7:1f:b1
Do you want to continue? {y|n}:: [n] y
Enter the password: &lt;enter switch password&gt;
Enter the password again: &lt;enter switch password&gt;
cluster1::*&gt; system  switch ethernet log enable-collection
Do you want to enable cluster log collection for all nodes in the cluster? {y|n}: [n] y
Enabling cluster switch log collection.
cluster1::*&gt;</pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="setup-the-shared-switch">Setup the shared switch</h4>
<div class="paragraph">
<p>The examples in this procedure use the following switch and node nomenclature:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The names of the two shared switches are <em>sh1</em> and <em>sh2</em>.</p>
</li>
<li>
<p>The nodes are <em>node1</em> and <em>node2</em>.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The procedure requires the use of both ONTAP commands and Cisco Nexus 9000 Series Switches commands, ONTAP commands are used unless otherwise indicated.
</td>
</tr>
</table>
</div>
<div class="sect4">
<h5 id="steps-2">Steps</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Verify that the storage configuration of HA pair 1 (and HA pair 2) is correct and error free:<br>
<code>system switch ethernet show</code></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>storage::*&gt; system switch ethernet show
Switch                    Type                   Address         Model
------------------------- ---------------------  --------------- -------
sh1
                          storage-network        172.17.227.5    C9336C

      Serial Number: FOC221206C2
       Is Monitored: true
             Reason: None
   Software Version: Cisco Nexus Operating System (NX-OS) Software, Version
                     9.3(5)
     Version Source: CDP
sh2
                          storage-network        172.17.227.6    C9336C
       Serial Number: FOC220443LZ
        Is Monitored: true
              Reason: None
    Software Version: Cisco Nexus Operating System (NX-OS) Software, Version
                      9.3(5)
      Version Source: CDP
2 entries were displayed.
storage::*&gt;</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p><a id="step2"></a>Verify that the storage node ports are healthy and operational:<br>
<code>storage port show -port-type ENET</code></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>storage::*&gt; storage port show -port-type ENET
                                   Speed                             VLAN
Node    Port    Type    Mode       (Gb/s)      State      Status       ID
------- ------- ------- ---------- ----------- ---------- ---------- -----
node1
        e0c     ENET   storage          100      enabled  online        30
        e0d     ENET   storage          100      enabled  online        30
        e5a     ENET   storage          100      enabled  online        30
        e5b     ENET   storage          100      enabled  online        30

node2
        e0c     ENET  storage           100      enabled  online        30
        e0d     ENET  storage           100      enabled  online        30
        e5a     ENET  storage           100      enabled  online        30
        e5b     ENET  storage           100      enabled  online        30</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p><a id="step3"></a>Move the HA pair 1, NSM224 path A ports to sh1 port range 11-22.</p>
</li>
<li>
<p>Install a cable from HA pair 1, node1, path A to sh1 port range 11-22. For example, the path A storage port on an AFF A400 is e0c.</p>
</li>
<li>
<p>Install a cable from HA pair 1, node2, path A to sh1 port range 11-22.</p>
</li>
<li>
<p>Verify that the node ports are healthy and operational:<br>
<code>storage port show -port-type ENET</code></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>storage::*&gt; storage port show -port-type ENET
                                   Speed                             VLAN
Node    Port    Type    Mode       (Gb/s)      State      Status       ID
------- ------- ------- ---------- ----------- ---------- ---------- -----
node1
        e0c     ENET   storage          100      enabled  online        30
        e0d     ENET   storage            0      enabled  offline       30
        e5a     ENET   storage            0      enabled  offline       30
        e5b     ENET   storage          100      enabled  online        30

node2
        e0c     ENET  storage           100      enabled  online        30
        e0d     ENET  storage             0      enabled  offline       30
        e5a     ENET  storage             0      enabled  offline       30
        e5b     ENET  storage           100      enabled  online        30</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="7">
<li>
<p><a id="step7"></a>Check that there are no storage switch or cabling issues with the cluster:<br>
<code>system health alert show -instance</code></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>storage::*&gt; system health alert show -instance
There are no entries matching your query.</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="8">
<li>
<p><a id="step8"></a>Move the HA pair 1, NSM224 path B ports to sh2 port range 11-22.</p>
</li>
<li>
<p>Install a cable from HA pair 1, node1, path B to sh2 port range 11-22. For example, the path B storage port on an AFF A400 is e5b.</p>
</li>
<li>
<p>Install a cable from HA pair 1, node2, path B to sh2 port range 11-22.</p>
</li>
<li>
<p>Verify that the node ports are healthy and operational:<br>
<code>storage port show -port-type ENET</code></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>storage::*&gt; storage port show -port-type ENET
                                   Speed                             VLAN
Node    Port    Type    Mode       (Gb/s)      State      Status       ID
------- ------- ------- ---------- ----------- ---------- ---------- -----
node1
        e0c     ENET   storage          100      enabled  online        30
        e0d     ENET   storage            0      enabled  offline       30
        e5a     ENET   storage            0      enabled  offline       30
        e5b     ENET   storage          100      enabled  online        30

node2
        e0c     ENET  storage           100      enabled  online        30
        e0d     ENET  storage             0      enabled  offline       30
        e5a     ENET  storage             0      enabled  offline       30
        e5b     ENET  storage           100      enabled  online        30</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="12">
<li>
<p><a id="step12"></a>Verify that the storage configuration of HA pair 1 is correct and error free:<br>
<code>system switch ethernet show</code></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>storage::*&gt; system switch ethernet show
Switch                    Type                   Address          Model
------------------------- ---------------------- ---------------- ----------
sh1
                          storage-network        172.17.227.5     C9336C

      Serial Number: FOC221206C2
       Is Monitored: true
             Reason: None
   Software Version: Cisco Nexus Operating System (NX-OS) Software, Version
                     9.3(5)
     Version Source: CDP
sh2
                          storage-network        172.17.227.6     C9336C
      Serial Number: FOC220443LZ
       Is Monitored: true
             Reason: None
   Software Version: Cisco Nexus Operating System (NX-OS) Software, Version
                     9.3(5)
     Version Source: CDP
2 entries were displayed.
storage::*&gt;</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="13">
<li>
<p><a id="step13"></a>Reconfigure the unused (controller) secondary storage ports on HA pair 1 from storage to networking. If more than one NS224 was direct attached, there will be ports that should be reconfigured.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>storage port modify –node [node name] –port [port name] –mode network</pre>
</div>
</div>
<div class="paragraph">
<p>To place storage ports into a broadcast domain:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>network port broadcast-domain create</code> (to create a new domain, if needed)</p>
</li>
<li>
<p><code>network port broadcast-domain add-ports</code> (to add ports to an existing domain)</p>
</li>
</ul>
</div>
<div class="olist arabic">
<ol class="arabic" start="14">
<li>
<p><a id="step14"></a>If you suppressed automatic case creation, re-enable it by invoking an AutoSupport message:<br>
<code>system node autosupport invoke -node * -type all -message MAINT=END</code></p>
</li>
</ol>
</div>
</div>
</div>

    </article>
    <!-- Page Container -->
  </div>

  
  <!-- Start Page Toolbar -->
  <div class="page-nav-toolbar">
    <div class="page-nav-contribute"  >
      <div class="page-nav-contribute-title">CONTRIBUTE</div>
      <a target="_blank" href="https://github.com/NetAppDocs/ontap-systems/blob/main/switch-cisco-9336c-shared/9336c_migrate_from_a_switchless_cluster_with_dat_storage_by_adding_two_new_shared_switches.adoc" class="btn btn-default githubEditButton" role="button"><img src="/us-en/ontap-systems/images/github.png" class="github-icon" />Edit on GitHub</a>
      <a target="_blank" href="https://github.com/NetAppDocs/ontap-systems/issues/new?body=Page%3A%20[Migrate from a switchless cluster with DAT storage by adding two new shared switches](https://docs.netapp.com/us-en/ontap-systems/switch-cisco-9336c-shared/9336c_migrate_from_a_switchless_cluster_with_dat_storage_by_adding_two_new_shared_switches.html)" class="btn btn-default githubEditButton" role="button"><img src="/us-en/ontap-systems/images/github.png" class="github-icon" />Request doc changes</a>
      <a target="_blank" href="https://docs.netapp.com/us-en/contribute/" class="page-nav-contribute-link"  >Contributor's Guide</a>
    </div>
    <div class="page-nav-container">
      <nav class="page-nav-fixed">
        <div class="page-nav-title">ON THIS PAGE</div>
        <div class="page-nav-links">
          <ul class="page-nav-inner" id="page-menu"></ul>
        </div>
      </nav>
    </div>
  </div>
  
  <div style="clear: both"></div><!-- Main needs to have height -->
</div>

        </main>

        <footer class="n-footer">
  <div class="n-footer__bottom">
    <div class="n-container">
      <div class="n-footer__bottom-left">

        <div class="n-footer__copyright">
          <ul class="n-footer__copyright-list">
            <li class="n-footer__copyright-link">
            <a href="https://www.netapp.com/us/legal/copyright.aspx">© 2021 NetApp, Inc.</a>
            </li>

</ul>
</div>
<div class="n-footer__social-links">
<ul class="n-footer__social-link-list">
<li class="n-footer__social-link-list-item">
<a class="n-footer__social-link" data-ntap-social="follow-blog" href="https://blog.netapp.com" target="_blank" title="blog" alt="blog">
<span class="n-footer__social-link-text">blog</span>
<svg class="n-icon-blog n-footer__social-link-icon" aria-labelledby="title">
  <title>blog@</title>
  <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/us-en/ontap-systems/common/svg/sprite.svg#blog"></use>
</svg>

</a>
</li>
<li class="n-footer__social-link-list-item">
<a class="n-footer__social-link" data-ntap-social="follow-community" href="https://community.netapp.com/" target="_blank" title="community" alt="community">
<span class="n-footer__social-link-text">community</span>
<svg class="n-icon-community n-footer__social-link-icon" aria-labelledby="title">
<title>community@</title>
<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/us-en/ontap-systems/common/svg/sprite.svg#comments"></use>
</svg>

</a>
</li>
<li class="n-footer__social-link-list-item">
<a class="n-footer__social-link" data-ntap-social="follow-twitter" href="https://twitter.com/netapp" target="_blank" title="twitter" alt="twitter">
<span class="n-footer__social-link-text">twitter</span>
<svg class="n-icon-twitter n-footer__social-link-icon" aria-labelledby="title">
<title>twitter@</title>
<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/us-en/ontap-systems/common/svg/sprite.svg#twitter"></use>
</svg>

</a>
</li>
<li class="n-footer__social-link-list-item">
<a class="n-footer__social-link" data-ntap-social="follow-facebook" href="https://www.facebook.com/NetApp" target="_blank" title="facebook" alt="facebook">
<span class="n-footer__social-link-text">facebook</span>
<svg class="n-icon-facebook n-footer__social-link-icon" aria-labelledby="title">
<title>facebook@</title>
<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/us-en/ontap-systems/common/svg/sprite.svg#facebook"></use>
</svg>

</a>
</li>
<li class="n-footer__social-link-list-item">
<a class="n-footer__social-link" data-ntap-social="follow-linkedin" href="https://www.linkedin.com/company/netapp" target="_blank" title="linkedin" alt="linkedin">
<span class="n-footer__social-link-text">linkedin</span>
<svg class="n-icon-linkedin n-footer__social-link-icon" aria-labelledby="title">
<title>linkedin@</title>
<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/us-en/ontap-systems/common/svg/sprite.svg#linkedin"></use>
</svg>

</a>
</li>
<li class="n-footer__social-link-list-item">
<a class="n-footer__social-link" data-ntap-social="follow-youtube" href="https://www.youtube.com/user/NetAppTV" target="_blank" title="youtube" alt="youtube">
<span class="n-footer__social-link-text">youtube</span>
<svg class="n-icon-youtube n-footer__social-link-icon" aria-labelledby="title">
<title>youtube@</title>
<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/us-en/ontap-systems/common/svg/sprite.svg#youtube"></use>
</svg>

</a>
</li>
<li class="n-footer__social-link-list-item">
<a class="n-footer__social-link" data-ntap-social="follow-slideshare" href="https://www.slideshare.net/NetApp" target="_blank" title="slideshare" alt="slideshare">
<span class="n-footer__social-link-text">slideshare</span>
<svg class="n-icon-slideshare n-footer__social-link-icon" aria-labelledby="title">
<title>slideshare@</title>
<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/us-en/ontap-systems/common/svg/sprite.svg#slideshare"></use>
</svg>

</a>
</li>
</ul>
</div>

</div>
<div class="n-footer__bottom-right">
  <p class="n-footer__fine-print">Have feedback for our website?<a target="_self" href="javascript:netapp_mailto()" class="n-footer__copyright">Let us know</a>
  <a href="https://docs.netapp.com/us-en/announcements/" class="n-footer__copyright">Announcements</a>
  </p>
</div>
</div>
</div>
</footer>

      </div>

      <!-- Elasticsearch JS -->
      <script type="text/javascript" src='/us-en/ontap-systems/js/bundle.js'></script>

      <!-- Syntax Highlighting -->
      <script type="text/javascript" src='/us-en/ontap-systems/js/prism.js'></script>
      <script type="text/javascript" src='/us-en/ontap-systems/js/prism-curl.js'></script>
    </div>
    <script>
      document.body.offsetWidth=1903;
      cookieLaw = {}
      cookieLaw.euCountry = "US";
      cookieLaw.invoke = function(){return false;}
    </script>
    <script src='/us-en/ontap-systems/js/www-ntap.js'></script>
  </body>

  
</html>
